(this["webpackJsonpwordgame-app"]=this["webpackJsonpwordgame-app"]||[]).push([[0],{196:function(e,t,r){"use strict";r.r(t);var n=r(11),a=r(0),c=r.n(a),s=r(19),o=r.n(s),u=(r(89),r(90),r(4)),l=r.n(u),i=r(7),m=r(14),p=r(23),b=(r(92),c.a.createContext()),f=c.a.createContext(),d=r(216),g=r(197),v=r(198),x=r(199),h=function(){return c.a.createElement(d.a,{isOpen:!0,contentClassName:"bg-transparent border-0"},c.a.createElement(g.a,null,c.a.createElement("div",{className:"loader"},"Loading...")))},E=r(10),k=r(83),w=null,O=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)("WordGame",5,{upgrade:function(e){e.createObjectStore("settings",{keyPath:"key"}),e.createObjectStore("sessions",{keyPath:"id"}),e.createObjectStore("terms",{keyPath:"id"}).createIndex("index","index")}});case 2:w=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=2;break}return e.abrupt("return",w);case 2:return e.next=4,O();case 4:return e.abrupt("return",w);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(l.a.mark((function e(){var t,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:return t=e.sent,e.next=5,t.transaction("terms","readonly").store.openCursor();case 5:r=e.sent,n=[];case 7:if(!r){e.next=14;break}return n.push(r.value),e.next=11,r.continue();case 11:r=e.sent,e.next=7;break;case 14:return e.abrupt("return",N(n));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(i.a)(l.a.mark((function e(t){var r,n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:return r=e.sent,n=r.transaction("sessions","readwrite"),a=Date.now().toString(),e.next=7,Promise.all([n.store.add({id:a,corrects:0,wrongs:0,count:t.length,nextWordIndex:0}),n.done]);case 7:return c=r.transaction("terms","readwrite"),e.next=10,c.store.clear();case 10:return e.next=12,Promise.all(t.sort((function(){return Math.random()-.5})).map((function(e,t){return c.store.add(Object(E.a)({},e,{index:t}))})));case 12:return e.next=14,c.done;case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(l.a.mark((function e(t){var r,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:return r=e.sent,n=r.transaction("sessions").objectStore("sessions"),e.next=6,n.get(t);case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(l.a.mark((function e(t){var r,n,a,c,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:return r=e.sent,n=r.transaction("sessions","readwrite").objectStore("sessions"),e.next=6,n.get(t);case 6:if(a=e.sent,c=a.nextWordIndex,s=a.count,-1!==c){e.next=10;break}return e.abrupt("return",{term:null,hasNext:!1});case 10:return e.next=12,n.put(Object(E.a)({},a,{nextWordIndex:c+1<s?c+1:-1}));case 12:return e.next=14,r.getFromIndex("terms","index",c);case 14:return o=e.sent,e.abrupt("return",{term:o,hasNext:c+1<s});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(l.a.mark((function e(t,r){var n,a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:return n=e.sent,a=n.transaction("sessions","readwrite"),c=a.objectStore("sessions"),e.next=7,c.get(t);case 7:return s=e.sent,e.next=10,c.put(Object(E.a)({},s,{corrects:s.corrects+r.correct,wrongs:s.wrongs+!r.correct,stats:(s.stats||[]).concat(r)}));case 10:return e.next=12,a.done;case 12:return e.abrupt("return",{ok:!0});case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(l.a.mark((function e(t){var r,n,a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,j();case 3:return n=e.sent,e.next=6,n.transaction("terms").store.openCursor();case 6:a=e.sent;case 7:if(!a){e.next=14;break}return r.push(a.value),e.next=11,a.continue();case 11:a=e.sent,e.next=7;break;case 14:return e.next=16,n.get("sessions",t);case 16:return c=e.sent,s=(c.stats||[]).reduce((function(e,t){var n=r.find((function(e){return e.word===t.termId})),a=n.tags.includes("MAS")?"der":n.tags.includes("FEM")?"die":n.tags.includes("NEU")?"das":null;return a?(t.correct?e[a].corrects+=1:e[a].wrongs+=1,e):e}),{der:{corrects:0,wrongs:0},die:{corrects:0,wrongs:0},das:{corrects:0,wrongs:0}}),e.abrupt("return",s);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(e){var t=e.sessionId,r=Object(a.useContext)(b),s=Object(a.useContext)(f),o=Object(p.g)(),u=Object(a.useState)({busy:!1,error:null}),m=Object(n.a)(u,2),E=m[0],k=m[1],w=Object(a.useState)(null),O=Object(n.a)(w,2),j=O[0],y=O[1],N=Object(a.useState)(null),C=Object(n.a)(N,2),A=C[0],P=C[1],R=s.getIn(["gameSession","term"]),M=Object(a.useCallback)(Object(i.a)(l.a.mark((function e(){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"user/next-term",status:"pending"}),e.next=3,S(t);case 3:if(n=e.sent,a=n.term,c=n.hasNext,a){e.next=9;break}return r({type:"user/next-term",status:"error",error:new Error("Session expired")}),e.abrupt("return");case 9:r({type:"user/next-term",status:"ok",term:a,hasNext:c}),P(Date.now()/1e3);case 11:case"end":return e.stop()}}),e)}))),[r,t]),T=Object(a.useCallback)(Object(i.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k({busy:!0}),t=s.getIn(["gameSession","id"]),r({type:"user/show-report",status:"pending",sessionId:t}),e.next=5,_(t);case 5:n=e.sent,r({type:"user/show-report",status:"ok",report:{session:n}});case 7:case"end":return e.stop()}}),e)}))),[r,s]),L=Object(a.useCallback)(function(){var e=Object(i.a)(l.a.mark((function e(r){var n,a,c,u,i,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.getIn(["gameSession","term","id"]),a=s.getIn(["gameSession","term","tags"]),c=a.includes(r),e.next=5,I(t,{termId:n,correct:c,seconds:Date.now()/1e3-A});case 5:if(u=e.sent,i=u.ok,m=u.error,i){e.next=14;break}if(401!==m.status_code){e.next=13;break}return localStorage.clear(),o.replace("/login",{expired:!0}),e.abrupt("return");case 13:return e.abrupt("return");case 14:if(c){e.next=18;break}y({correct:c,article:a.includes("MAS")?"der":a.includes("FEM")?"die":"das"}),e.next=24;break;case 18:if(!s.getIn(["gameSession","hasNext"])){e.next=23;break}return e.next=21,M();case 21:e.next=24;break;case 23:T();case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[M,o,t,T,s,A]),B=Object(a.useCallback)(Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:case"end":return e.stop()}}),e)}))),[M]),D=Object(a.useCallback)(Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(null),!s.getIn(["gameSession","hasNext"])){e.next=6;break}return e.next=4,M();case 4:e.next=7;break;case 6:T();case 7:case"end":return e.stop()}}),e)}))),[M,T,s]);Object(a.useEffect)((function(){Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:case"end":return e.stop()}}),e)})))()}),[M]);var F=Object(a.useCallback)((function(e){if(R)switch(String.fromCharCode(e.keyCode)){case"s":case"3":return L("NEU");case"2":case"e":return L("FEM");case"1":case"r":return L("MAS")}}),[L,R]);return Object(a.useEffect)((function(){return window.addEventListener("keypress",F),function(){window.removeEventListener("keypress",F)}}),[F]),c.a.createElement("section",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h2",{className:"text-center text-black-50"},"Play"),!R&&c.a.createElement("p",{className:"text-center"},"Loading..."),!!R&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"term mt-5 mb-5"},c.a.createElement("div",{className:"text-center display-2 text-break"},R.get("word")),c.a.createElement("button",{className:"btn btn-sm btn-link"},"Meaning >>")),c.a.createElement("div",{className:"actions text-center"},c.a.createElement("div",{className:"btn-group w-75"},c.a.createElement("button",{className:"btn btn-light btn-lg text-white btn-circle bg-masculine mr-1",onClick:function(){return L("MAS")}},"Der",c.a.createElement("span",{className:"btn-hinttext"},"1")),c.a.createElement("button",{className:"btn btn-light btn-lg text-white btn-circle bg-feminine mr-1",onClick:function(){return L("FEM")}},"Die",c.a.createElement("span",{className:"btn-hinttext"},"2")),c.a.createElement("button",{className:"btn btn-light btn-lg text-white btn-circle bg-neuter",onClick:function(){return L("NEU")}},"Das",c.a.createElement("span",{className:"btn-hinttext"},"3"))),c.a.createElement("div",{className:"btn-group w-50 mt-5"},c.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:B},"Skip")),c.a.createElement("div",{className:"text-center mt-5"},c.a.createElement("button",{className:"btn btn-light",onClick:T},"I'm done for now"))))),!!j&&c.a.createElement(d.a,{isOpen:!0},c.a.createElement(g.a,null,c.a.createElement("div",{className:"display-2 text-center",style:{wordBreak:"break-word"}},c.a.createElement("span",{className:"font-weight-lighter text-muted"},R.get("word")),", ",c.a.createElement("br",null),c.a.createElement("span",{className:"font-weight-bold"},j.article))),c.a.createElement(v.a,null,c.a.createElement(x.a,{color:"success",onClick:D,className:"mx-auto"},"Next"))),!!E.busy&&c.a.createElement(h,null))},P=r(39),R={fill:!1,lineTension:.1,backgroundColor:"rgba(63,69,192,0.4)",borderColor:"rgb(65,121,192)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10},M=function(e){var t=e.weeklyPerformance,r=t.map((function(e){var t,r=e.week;return t=new Date(7*r*86400*1e3),"".concat(t.getMonth()+1,".").concat(t.getDate())})),n=t.map((function(e){return(100*e.confidence_factor).toFixed(2)})),a=t.map((function(e){return(100*e.correct_factor).toFixed(2)}));return c.a.createElement(P.b,{data:{labels:r,datasets:[Object(E.a)({label:"Correct",data:a},R),Object(E.a)({label:"Confidence",data:n},R,{backgroundColor:"#C0122A",borderColor:"#f3132c"})]},width:100,height:40,options:{scales:{yAxes:[{ticks:{max:100,min:0,stepSize:20}}]},maintainAspectRatio:!0,layout:{padding:0}}})},T=function(){var e=Object(a.useContext)(f),t=e.getIn(["report","session"]),r=e.getIn(["report","weekly_performance"]),n=t.getIn(["der","corrects"])/(t.getIn(["der","corrects"])+t.getIn(["der","wrongs"])),s=t.getIn(["die","corrects"])/(t.getIn(["die","corrects"])+t.getIn(["die","wrongs"])),o=t.getIn(["das","corrects"])/(t.getIn(["das","corrects"])+t.getIn(["das","wrongs"]));return c.a.createElement("section",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h2",null,"Report"),c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header"},c.a.createElement("h3",null,"Session Report")),c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"progress-group"},c.a.createElement("div",{className:"progress-label"},"DER"),c.a.createElement("div",{className:"progress mr-0"},c.a.createElement("div",{className:"progress-bar bg-masculine",role:"progressbar",style:{width:"".concat(100*n,"%")}}))),c.a.createElement("div",{className:"progress-group"},c.a.createElement("div",{className:"progress-label"},"DIE"),c.a.createElement("div",{className:"progress mr-0"},c.a.createElement("div",{className:"progress-bar bg-feminine",role:"progressbar",style:{width:"".concat(100*s,"%")}}))),c.a.createElement("div",{className:"progress-group"},c.a.createElement("div",{className:"progress-label"},"DAS"),c.a.createElement("div",{className:"progress mr-0"},c.a.createElement("div",{className:"progress-bar bg-neuter",role:"progressbar",style:{width:"".concat(100*o,"%")}}))))),!!r&&c.a.createElement("div",{className:"card mt-4"},c.a.createElement("div",{className:"card-header"},c.a.createElement("h3",{className:"mb-0"},"Weekly Report")),c.a.createElement("div",{className:"card-body"},c.a.createElement(M,{weeklyPerformance:r.toJS()})))))},L=r(26),B=r.n(L),D=r(40),F=function(e){var t=Object(a.useContext)(b),r=Object(a.useContext)(f),s=Object(a.useState)(null),o=Object(n.a)(s,2),u=o[0],d=o[1],g=Object(p.g)(),v=Object(p.i)(),h=Object(a.useCallback)(Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:t=e.sent,g.replace("/play/".concat(t));case 4:case"end":return e.stop()}}),e)}))),[g]);Object(a.useEffect)((function(){Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.load)("6LfUb-EUAAAAAEBdxIpMqGCi2e7ScZ4I4eqVhzAh");case 2:t=e.sent,d(t);case 4:case"end":return e.stop()}}),e)})))()}),[t]),Object(a.useEffect)((function(){Object(i.a)(l.a.mark((function e(){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.sessionId){e.next=7;break}return e.next=3,C(v.sessionId);case 3:r=e.sent,t({type:"user/start-session",status:"ok",session:r}),e.next=8;break;case 7:localStorage.getItem("wg:token")?g.replace("/collections"):g.replace("/login");case 8:case"end":return e.stop()}}),e)})))()}),[t,g,v.sessionId]);var E=Object(a.useCallback)(function(){var e=Object(i.a)(l.a.mark((function e(r){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.accessToken,a=r.profileObj,localStorage.setItem("wg:profileObj",a),localStorage.setItem("wg:token",n),t({type:"user/login",status:"ok",token:n,profile:a}),g.replace("/collections");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,g]),k=r.getIn(["gameSession"]);return c.a.createElement("div",{className:"container play-page"},!(k&&k.get("id"))&&c.a.createElement("section",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("div",{className:"btn btn-primary btn-lg w-100",style:{marginTop:"75%"}},"START"))),!(!k||!k.get("id")||"playing"!==k.get("status"))&&c.a.createElement(A,{sessionId:k.get("id")}),!(!k||!k.get("id")||"done"!==k.get("status"))&&c.a.createElement(T,{sessionId:k.get("id")}),!(!k||!k.get("id")||"done"!==k.get("status"))&&c.a.createElement("section",{className:"row"},c.a.createElement("div",{className:"col"},r.getIn(["profile","isLoggedIn"])&&c.a.createElement(m.b,{className:"btn btn-sm btn-link btn-block",to:"/collections"},"Back to collections"),!r.getIn(["profile","isLoggedIn"])&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"row mt-2 justify-content-center"},c.a.createElement("div",{className:"col-6"},c.a.createElement(x.a,{disabled:!u,color:"primary",block:!0,onClick:h},"TRY AGAIN!"))),c.a.createElement(B.a,{clientId:"976856176051-ietkcknpua13udt2tucm8sbecik7h5rt.apps.googleusercontent.com",onSuccess:E,responseType:"code",className:"mt-5"}),c.a.createElement("p",{className:"text-muted"},"...to keep track of your progress")))))},U=r(200),W=function(){var e=Object(a.useState)(null),t=Object(n.a)(e,2),r=t[0],s=t[1],o=Object(a.useContext)(b),u=Object(p.g)(),m=Object(p.i)(),f=Object(p.h)(),d=Object(a.useCallback)(function(){var e=Object(i.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.accessToken,n=t.profileObj,localStorage.setItem("wg:profile",JSON.stringify(n)),localStorage.setItem("wg:token",r),o({type:"user/login",status:"ok",token:r}),u.replace("/collections");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,u]),g=Object(a.useCallback)(Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N([]);case 2:t=e.sent,u.replace("/play/".concat(t));case 4:case"end":return e.stop()}}),e)}))),[u]);return Object(a.useEffect)((function(){console.log(m),Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.load)("6LfUb-EUAAAAAEBdxIpMqGCi2e7ScZ4I4eqVhzAh");case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})))()})),c.a.createElement("div",{className:"container login-page"},!(!f.state||!f.state.expired)&&c.a.createElement(U.a,{className:"mt-2 alert-float",isOpen:!0,color:"warning",toggle:function(){return u.replace("/login")}},c.a.createElement("h4",{className:"alert-heading"},"Your session has expired."),c.a.createElement("p",{className:"mt-3 text-center text-sm-left"},"Without logging in, your session lasts for only for 10 minutes.")),c.a.createElement("section",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h3",{style:{marginTop:"50%"}},"Hallo Deutsch"),c.a.createElement(B.a,{clientId:"976856176051-ietkcknpua13udt2tucm8sbecik7h5rt.apps.googleusercontent.com",onSuccess:d,responseType:"token",isSignedIn:!0}),c.a.createElement("p",{className:"text-muted"},"...to coup with the insane irregularity in the German language."))),c.a.createElement("div",{className:"row justify-content-center"},c.a.createElement("div",{className:"col-6"},c.a.createElement(x.a,{disabled:!r,color:"primary",block:!0,onClick:g},"TRY NOW!"))))},J=r(201),q=r(202),G=r(203),H=r(204),z=r(205),Y=r(41),V=r.n(Y),Z="http://hallodeutsch.fatmandesigner.com",$=function(){var e=Object(i.a)(l.a.mark((function e(t,r){var n,a,c=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>2&&void 0!==c[2]?c[2]:null,localStorage.getItem("".concat("wg",":token")),a={"Content-Type":"application/json"},e.abrupt("return",fetch(t,"GET"===r||"DELETE"===r?{headers:a,method:r}:{headers:a,method:r,body:n}).catch((function(e){return{ok:!1,error:e}})));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),K=function(){var e=Object(i.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{ok:!1});case 2:if(e.prev=2,!(r=t.headers.get("content-type"))||!r.match(/json/)){e.next=13;break}if(!(t.status>=400)){e.next=10;break}return e.next=8,t.json();case 8:return e.t0=e.sent,e.abrupt("return",{ok:!1,error:e.t0});case 10:return e.abrupt("return",t.json());case 13:return e.next=15,t.text();case 15:return e.t1=e.sent,e.abrupt("return",{ok:!1,error:e.t1});case 17:e.next=22;break;case 19:return e.prev=19,e.t2=e.catch(2),e.abrupt("return",{ok:!1,error:e.t2});case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t){return e.apply(this,arguments)}}(),Q={request:$,get:function(e){return Object(i.a)(l.a.mark((function t(){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$("".concat(Z).concat(e),"GET");case 2:return r=t.sent,t.abrupt("return",K(r));case 4:case"end":return t.stop()}}),t)})))()},post:function(e,t){return Object(i.a)(l.a.mark((function r(){var n;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,$("".concat(Z).concat(e),"POST",JSON.stringify(t));case 2:return n=r.sent,r.abrupt("return",K(n));case 4:case"end":return r.stop()}}),r)})))()},put:function(e,t){return Object(i.a)(l.a.mark((function r(){var n;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,$("".concat(Z).concat(e),"PUT",JSON.stringify(t));case 2:return n=r.sent,r.abrupt("return",K(n));case 4:case"end":return r.stop()}}),r)})))()},patch:function(e,t){return Object(i.a)(l.a.mark((function r(){var n;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,$("".concat(Z).concat(e),"PATCH",JSON.stringify(t));case 2:return n=r.sent,r.abrupt("return",K(n));case 4:case"end":return r.stop()}}),r)})))()},delete:function(e){return Object(i.a)(l.a.mark((function t(){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$("".concat(Z).concat(e),"DELETE");case 2:return r=t.sent,t.abrupt("return",K(r));case 4:case"end":return t.stop()}}),t)})))()}},X=Q;function ee(e,t){return te.apply(this,arguments)}function te(){return(te=Object(i.a)(l.a.mark((function e(t,r){var n,a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.request(t,"GET");case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Bad Request");case 5:return e.next=7,n.json();case 7:if("base64"===(a=e.sent).encoding){e.next=10;break}throw new Error("Bad Request");case 10:return c=decodeURIComponent(escape(atob(a.content))),s=r(c),e.abrupt("return",s);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re="https://api.github.com/repos/khanhhua/wordgame-data",ne=function(){var e=Object(i.a)(l.a.mark((function e(){var t,r,n,a=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:re,e.prev=1,e.next=4,X.request("".concat(t,"/contents"),"GET");case 4:return r=e.sent,e.next=7,r.json();case 7:return n=e.sent,e.abrupt("return",Promise.all(n.map(function(){var e=Object(i.a)(l.a.mark((function e(t){var r,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._links.self,n=r.replace("?ref=master",""),e.next=4,ee("".concat(n,"/package.json"),JSON.parse);case 4:return a=e.sent,e.abrupt("return",Object(E.a)({},a,{url:n}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(i.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/package.json"),e.prev=1,e.next=4,ee(r,JSON.parse);case 4:return n=e.sent,e.abrupt("return",n.collections.map((function(e){return Object(E.a)({},e,{repoUrl:t})})));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(i.a)(l.a.mark((function e(t,r){var n,a,c,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:null,a="".concat(t,"/").concat(r),e.prev=2,e.next=5,ee(a,(function(e){return e.split("\n").filter(Boolean).map((function(e){var t=e.split(";");return{id:t[0],word:t[0],meaning:t[1],tags:t[2]}})).filter((function(e){switch(n){default:return!0;case"noun":var t=e.tags;return t.includes("MAS")||t.includes("FEM")||t.includes("NEU")}}))}));case 5:return c=e.sent,console.log({words:c}),e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,r){return e.apply(this,arguments)}}(),se=function(e){var t=e.collections,r=e.onReviewClick,n=e.onEditClick,a="function"===typeof n;return c.a.createElement("div",{className:"list-group list-group-flush"},t.map((function(e){return c.a.createElement("div",{key:e.get("id"),className:"list-group-item px-1"},e.get("name"),c.a.createElement("div",{className:"actions float-right"},c.a.createElement("div",{className:"btn-group btn-group-sm"},a&&c.a.createElement("button",{className:"btn btn-sm btn-light",onClick:function(){return n(e)}},"Edit"),c.a.createElement("button",{className:"btn btn-sm btn-primary",onClick:function(){return r(e)}},"Review"))))})))},oe=function(e){var t=Object(a.useContext)(b),r=Object(a.useContext)(f),s=Object(a.useState)({visible:!1,name:""}),o=Object(n.a)(s,2),u=o[0],m=o[1],h=Object(a.useRef)(),E=Object(p.g)();Object(a.useEffect)((function(){Object(i.a)(l.a.mark((function e(){var n,a,c,s,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.getIn(["repo","current","url"]),e.next=3,ae(n).then((function(e){return{collections:e,myCollections:[],ok:!0,error:null}}));case 3:if(a=e.sent,c=a.ok,s=a.collections,o=a.myCollections,u=a.error,c){e.next=15;break}if(401!==u.status_code){e.next=13;break}return localStorage.clear(),E.replace("/login",{expired:!0}),e.abrupt("return");case 13:return t({type:"user/list-collections",status:"error",error:u}),e.abrupt("return");case 15:t({type:"user/list-collections",status:"ok",collections:s,myCollections:o});case 16:case"end":return e.stop()}}),e)})))()}),[t,E,r]);var k=Object(a.useCallback)(function(){var e=Object(i.a)(l.a.mark((function e(r){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"user/start-session",status:"pending"}),e.next=3,ce(r.get("repoUrl"),r.get("file"),"noun");case 3:return n=e.sent,e.next=6,N(n);case 6:a=e.sent,E.push("/play/".concat(a)),t({type:"user/start-session",status:"ok"});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,E]),w=Object(a.useCallback)(Object(i.a)(l.a.mark((function e(){var r,n,a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:r="user/create-collection",status:"pending"}),e.next=4,X.post("/api/me/collections",{name:h.current.value});case 4:if(n=e.sent,a=n.ok,c=n.collection,s=n.error,a){e.next=14;break}if(401!==s.status_code){e.next=13;break}return localStorage.clear(),E.replace("/login",{expired:!0}),e.abrupt("return");case 13:return e.abrupt("return",t({type:r,status:"error",error:s}));case 14:t({type:r,status:"ok",collection:c}),m({visible:!1});case 16:case"end":return e.stop()}}),e)}))),[t,E]),O=Object(a.useCallback)(function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.push("/collections/".concat(t.get("id")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[E]),j=r.get("collections"),y=r.get("myCollections");return c.a.createElement("div",{className:"container my-collection-list-page"},c.a.createElement("section",{className:"row"},c.a.createElement("div",{className:"col"},!(!y||!y.size)&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"w-100"},c.a.createElement("button",{onClick:function(){return m({visible:!0})},className:"btn btn-sm btn-light mt-2 float-right"},"Add"),c.a.createElement("h2",null,"My Learning List")),c.a.createElement(se,{onEditClick:O,collections:y,onReviewClick:k})),!(j&&j.size)&&c.a.createElement("p",{className:"text-center"},"Loading..."),!(!j||!j.size)&&c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",{className:"mt-5"},"Collections"),c.a.createElement(se,{collections:j,onReviewClick:k})))),!!u.visible&&c.a.createElement(d.a,{isOpen:u.visible},c.a.createElement(J.a,{toggle:function(){return m({visible:!1})}},"New Collection"),c.a.createElement(g.a,null,c.a.createElement(q.a,null,c.a.createElement(G.a,null,c.a.createElement(H.a,null,"Name"),c.a.createElement(z.a,{innerRef:h})))),c.a.createElement(v.a,null,c.a.createElement(x.a,{onClick:w,color:"primary"},"Create"))))},ue=r(206),le=r(207),ie=r(208),me=r(209),pe={backgroundColor:"rgba(63,69,192,0.4)",borderColor:"rgb(65,121,192)",borderWidth:1,hoverBackgroundColor:"rgba(63,69,192,0.4)",hoverBorderColor:"rgb(65,121,192)"},be=function(e){var t=e.histogram;return c.a.createElement(P.a,{width:100,height:50,data:{labels:t.map((function(e){return e.seconds})),datasets:[Object(E.a)({label:"Correct Response Time (s)",data:t.map((function(e){return e.correct_count}))},pe),Object(E.a)({label:"Incorrect Response Time (s)",data:t.map((function(e){return e.wrong_count}))},pe,{backgroundColor:"rgba(192,83,102,0.4)",borderColor:"rgb(192,73,90)"})]},options:{scales:{yAxes:[{ticks:{min:0}}],xAxes:[{distribution:"series"}]}}})},fe=function(){var e=Object(i.a)(l.a.mark((function e(t){var r,a,c,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.weekly,t.worst,t.histogram,r=[],e.next=4,j();case 4:return a=e.sent,e.next=7,a.transaction("sessions").store.openCursor();case 7:c=e.sent;case 8:if(!c){e.next=15;break}return c.value.stats&&(r=r.concat(c.value.stats)),e.next=12,c.continue();case 12:c=e.sent,e.next=8;break;case 15:return s=Object.entries(r.reduce((function(e,t){var r=t.termId,n=t.correct,a=t.seconds,c=r;c in e||(e[c]={correct_count:0,seconds_correct:0,total_count:0,total_seconds:0});var s=e[c];return n&&(s.correct_count+=1,s.seconds_correct+=a),s.total_count+=1,s.total_seconds+=a,e}),{})).map((function(e){var t=Object(n.a)(e,2),r=t[0],a=t[1],c=a.correct_count,s=a.total_count,o=a.seconds_correct,u=a.total_seconds;return{word:r,correct_factor:Math.round(100*c/(1*s))/100,confidence_factor:Math.round(100*o/(1*u))/100}})).sort((function(e,t){return e.correct_factor-t.correct_factor})).slice(0,20),o=Object.entries(r.reduce((function(e,t){var r=t.correct,n=t.seconds,a=Math.floor(n);a in e||(e[a]={correct_count:0,wrong_count:0});var c=e[a];return r?c.correct_count+=1:c.wrong_count+=1,e}),{})).map((function(e){var t=Object(n.a)(e,2),r=t[0],a=t[1];return Object(E.a)({seconds:r},a)})).sort((function(e,t){return e.seconds-t.seconds})),e.abrupt("return",{worstPerformers:s,weeklyPerformance:[],histogram:o});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=r(54),ge=r.n(de),ve=function(){var e=Object(i.a)(l.a.mark((function e(t,r){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:return n=e.sent,e.next=5,n.put("settings",{key:t,value:r});case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),xe=function(){var e=Object(i.a)(l.a.mark((function e(t){var r,n,a,c=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:null,e.next=3,j();case 3:return n=e.sent,e.next=6,n.get("settings",t);case 6:if("object"!==typeof(a=e.sent)||!r){e.next=9;break}return e.abrupt("return",ge()(a,"value.".concat(r)));case 9:return e.abrupt("return",a.value);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he={MAS:"bg-masculine",FEM:"bg-feminine",NEU:"bg-neuter"},Ee=function(e){var t=/MAS|FEM|NEU/.exec(e);return t?he[t[0]]:""},ke=function(e){var t=Object(a.useContext)(b),r=Object(p.g)(),s=Object(a.useState)({busy:!1,error:null}),o=Object(n.a)(s,2),u=o[0],m=o[1],f=Object(a.useState)({worstPerformers:[],weeklyPerformance:[],histogram:[]}),d=Object(n.a)(f,2),g=d[0],v=d[1];Object(a.useEffect)((function(){Object(i.a)(l.a.mark((function e(){var t,r,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m({busy:!0}),e.next=3,fe({});case 3:t=e.sent,r=t.worstPerformers,n=t.weeklyPerformance,a=t.histogram,m({busy:!1}),v({worstPerformers:r,weeklyPerformance:n,histogram:a});case 9:case"end":return e.stop()}}),e)})))()}),[]);var E=Object(a.useCallback)(Object(i.a)(l.a.mark((function e(){var n,a,c,s,o,u,i,m,p,b,f,d,g,v,x;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe("repo.current");case 2:return n=e.sent,e.next=5,ae(n.url);case 5:a=e.sent,c=[],s=!0,o=!1,u=void 0,e.prev=10,i=a[Symbol.iterator]();case 12:if(s=(m=i.next()).done){e.next=21;break}return p=m.value,e.next=16,ce(p.repoUrl,p.file,"noun");case 16:b=e.sent,c=c.concat(b);case 18:s=!0,e.next=12;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(10),o=!0,u=e.t0;case 27:e.prev=27,e.prev=28,s||null==i.return||i.return();case 30:if(e.prev=30,!o){e.next=33;break}throw u;case 33:return e.finish(30);case 34:return e.finish(27);case 35:return e.next=37,fe({});case 37:return f=e.sent,d=f.worstPerformers,g=d.filter((function(e){return e.correct_factor<.7})).map((function(e){return e.word})),v=c.filter((function(e){var t=e.word;return g.includes(t)})),console.log({terms:v}),t({type:"user/start-session",status:"pending"}),e.next=45,N(v);case 45:x=e.sent,r.push("/play/".concat(x)),t({type:"user/start-session",status:"ok"});case 48:case"end":return e.stop()}}),e,null,[[10,23,27,35],[28,,30,34]])}))),[t,r]);return c.a.createElement("div",{className:"container report-page"},!!u.busy&&c.a.createElement(h,null),c.a.createElement("section",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h2",null,"Report"),c.a.createElement(ue.a,null,c.a.createElement(le.a,null,c.a.createElement(x.a,{color:"primary",className:"float-right",onClick:E},"Review"),c.a.createElement("h5",{className:"mb-0"},"Needs improvements")),c.a.createElement(ie.a,null,g.worstPerformers.map((function(e){return c.a.createElement(me.a,{pill:!0,className:"p-2 mr-2 mb-2 ".concat(Ee(e.tags)),style:{opacity:1.05-e.confidence_factor}},e.word,c.a.createElement("span",{className:"pl-2"},100*e.correct_factor,"%"))})))),c.a.createElement(ue.a,{className:"mt-2"},c.a.createElement(le.a,null,c.a.createElement("h5",{className:"mb-0"},"Performance")),c.a.createElement(ie.a,null,!!(g&&g.histogram&&g.histogram.length)&&c.a.createElement(be,{histogram:g.histogram}),!!(g&&g.weeklyPerformance&&g.weeklyPerformance.length)&&c.a.createElement(M,{weeklyPerformance:g.weeklyPerformance}))))))},we=r(210),Oe=r(211),je=r(212),ye=r(213),Ne=function(){var e=Object(a.useContext)(b),t=Object(a.useContext)(f),r=Object(a.useCallback)((function(){e({type:"user/logout"}),window.localStorage.clear()}),[e]);return c.a.createElement(we.a,{light:!0,className:"bg-light"},c.a.createElement(Oe.a,{className:"font-weight-lighter"},"Hallo Deutsch"),!!t.getIn(["profile","isLoggedIn"])&&[c.a.createElement(je.a,{className:"mx-auto"},c.a.createElement(m.c,{to:"/collections",exact:!0,className:"nav-item px-2"},"Collections"),c.a.createElement(m.c,{to:"/report",exact:!0,className:"nav-item px-2"},"Report")),c.a.createElement(je.a,null,c.a.createElement(ye.a,null,c.a.createElement(m.c,{to:"/settings/repo",exact:!0,className:"d-block mt-2 px-2"},"Choose Repo Content")),c.a.createElement(ye.a,null,c.a.createElement(L.GoogleLogout,{clientId:"976856176051-ietkcknpua13udt2tucm8sbecik7h5rt.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:r})))])},Ce=r(31),Se=r(214),Ie=r(215),_e=r(82),Ae=function(e){var t={};return Object.keys(Q).forEach((function(r){Object.defineProperty(t,r,{value:V()(Q[r],1e3*e)})})),t}(1),Pe=V()((function(e,t){X.get("/api/search?q=".concat(e)).then((function(e){var r=e.ok,n=e.terms,a=e.error;if(!r)return 401===a.status_code?(localStorage.clear(),void window.history.replaceState({expired:!0},null,"/login")):[];t(n.map((function(e){return{value:e.id,label:e.word}})))}))}),1e3,{leading:!1,trailing:!0}),Re=function(){var e=Object(a.useContext)(b),t=Object(p.g)(),r=Object(p.i)().collectionId,s=void 0===r?null:r,o=Object(a.useState)({busy:!1,error:null}),u=Object(n.a)(o,2),m=u[0],f=u[1],h=Object(a.useState)({}),k=Object(n.a)(h,2),w=k[0],O=k[1],j=Object(a.useState)(""),y=Object(n.a)(j,2),N=y[0],C=y[1],S=Object(a.useState)(10),I=Object(n.a)(S,2),_=I[0],A=I[1],P=Object(a.useCallback)((function(){t.replace("/collections")}),[t]),R=Object(a.useCallback)(function(){var e=Object(i.a)(l.a.mark((function e(r){var n,a,c,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.target.value,O(Object(E.a)({},w,{name:n})),!(a=Ae.patch("/api/me/collections/".concat(s),{name:n}))){e.next=14;break}return e.next=6,a;case 6:if(c=e.sent,o=c.ok,u=c.error,o){e.next=14;break}if(401!==u.status_code){e.next=14;break}return localStorage.clear(),t.replace("/login",{expired:!0}),e.abrupt("return");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[w,s,t]),M=Object(a.useCallback)(function(){var r=Object(i.a)(l.a.mark((function r(n,a){var c,o,u,i;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("select-option"===a.action){r.next=3;break}return r.abrupt("return");case 3:return e({type:c="user/add-to-collections",status:"pending"}),r.next=7,X.post("/api/me/collections/".concat(s,"/terms"),{term_id:n.value});case 7:if(o=r.sent,u=o.ok,i=o.error,u){r.next=16;break}if(401!==i.status_code){r.next=15;break}return localStorage.clear(),t.replace("/login",{expired:!0}),r.abrupt("return");case 15:return r.abrupt("return",e({type:c,status:"error",error:i}));case 16:O(Object(E.a)({},w,{terms:[{id:n.value,word:n.label}].concat(Object(Ce.a)(w.terms||[]))}));case 17:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),[w,s,e,t]),T=Object(a.useCallback)(function(){var e=Object(i.a)(l.a.mark((function e(r){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.delete("/api/me/collections/".concat(s,"/terms/").concat(r));case 2:if(n=e.sent,a=n.ok,c=n.error,a){e.next=11;break}if(401!==c.status_code){e.next=10;break}return localStorage.clear(),t.replace("/login",{expired:!0}),e.abrupt("return");case 10:return e.abrupt("return");case 11:O(Object(E.a)({},w,{terms:w.terms.filter((function(e){return e.id!==r}))}),[w]);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[w,s,t]);return Object(a.useEffect)((function(){f({busy:!0}),Object(i.a)(l.a.mark((function e(){var r,n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.get("/api/me/collections/".concat(s));case 2:if(r=e.sent,n=r.ok,a=r.error,c=r.collection,n){e.next=12;break}if(401!==a.status_code){e.next=11;break}return localStorage.clear(),t.replace("/login",{expired:!0}),e.abrupt("return");case 11:return e.abrupt("return");case 12:f({busy:!1}),O(c);case 14:case"end":return e.stop()}}),e)})))()}),[s,t]),c.a.createElement(d.a,{isOpen:!0},c.a.createElement(J.a,{toggle:P},"Edit Collection"),c.a.createElement(g.a,null,m.busy&&c.a.createElement("div",{className:"loader loader-dark"},"Loading..."),!m.busy&&c.a.createElement(q.a,null,c.a.createElement(G.a,null,c.a.createElement(H.a,null,"Name"),c.a.createElement(z.a,{value:w.name,onChange:R})),c.a.createElement(G.a,null,c.a.createElement(_e.a,{placeholder:"Enter your new word...",value:N,onInputChange:function(e){return C(e)},onChange:M,loadOptions:Pe}),c.a.createElement(Se.a,{flush:!0},(w.terms||[]).slice(0,_).map((function(e){return c.a.createElement(Ie.a,{key:e.id},e.word,c.a.createElement(x.a,{size:"sm",color:"link",className:"float-right",onClick:function(){return T(e.id)}},"\xd7"))})),w.terms&&_<w.terms.length&&c.a.createElement(Ie.a,null,c.a.createElement(x.a,{color:"link",block:!0,onClick:function(){return A(2*_)}},"Show more >>")))))),c.a.createElement(v.a,null,c.a.createElement(x.a,{onClick:P,color:"light"},"Close")))},Me=function(e){var t=Object(a.useContext)(b),r=Object(a.useContext)(f),n=Object(p.g)();Object(a.useEffect)((function(){Object(i.a)(l.a.mark((function e(){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"repo/list-contents",status:"pending"}),e.next=3,ne();case 3:r=e.sent,t({type:"repo/list-contents",status:"ok",contents:r});case 5:case"end":return e.stop()}}),e)})))()}),[t]);var s=Object(a.useCallback)((function(e){ve("repo.current",{name:e.get("name"),url:e.get("url")}).then((function(){t({type:"repo/choose-collection",collection:e}),n.replace("/collections")}))}),[t,n]),o=r.getIn(["repo","contents"]);return c.a.createElement("div",{className:"container repo-contents-page"},c.a.createElement("section",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("div",{className:"list-group list-group-flush"},o.map((function(e){return c.a.createElement("div",{className:"list-group-item"},e.get("name"),c.a.createElement("button",{className:"btn btn-sm btn-primary float-right",onClick:function(){return s(e)}},"Choose"))}))))))};var Te=function(){var e=Object(a.useContext)(b),t=Object(a.useContext)(f);return Object(a.useEffect)((function(){Object(i.a)(l.a.mark((function t(){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xe("repo.current");case 2:r=t.sent,e({type:"repo/choose-collection",collection:r});case 4:case"end":return t.stop()}}),t)})))()}),[e]),c.a.createElement("div",{className:"App"},c.a.createElement(m.a,null,c.a.createElement(p.d,null,c.a.createElement(p.b,{exact:!0,path:"/login"},c.a.createElement(W,null)),c.a.createElement(p.b,{exact:!0,path:"/play/:sessionId"},c.a.createElement(Ne,null),c.a.createElement(F,null)),c.a.createElement(p.b,{exact:!0,path:"/play"},c.a.createElement(Ne,null),c.a.createElement(F,null)),c.a.createElement(p.b,{exact:!0,path:"/report"},c.a.createElement(Ne,null),c.a.createElement(ke,null)),c.a.createElement(p.b,{path:"/collections",render:function(){return t.getIn(["profile","isLoggedIn"])?c.a.createElement(c.a.Fragment,null,c.a.createElement(Ne,null),c.a.createElement(oe,null),c.a.createElement(p.b,{path:"/collections/:collectionId"},c.a.createElement(Re,null))):c.a.createElement(p.a,{to:"/login"})}}),c.a.createElement(p.b,{exact:!0,path:"/settings/repo"},c.a.createElement(Ne,null),c.a.createElement(Me,null)),c.a.createElement(p.b,null,c.a.createElement(p.a,{to:"/login"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Le=r(15),Be=r(17),De=Object(Be.a)({profile:{isLoggedIn:!1},gameSession:{id:null,status:"pending"},repo:{contents:[],current:{url:"https://api.github.com/repos/khanhhua/wordgame-data/contents/menschen",name:"Menschen"}},collections:[],report:{}}),Fe=function(e,t){var r=t.type,n=t.status,a=Object(Le.a)(t,["type","status"]);if("error"===n)return a.error&&"Invalid token"===a.error?e.set("profile",Object(Be.a)({isLoggedIn:!1})):e;if("pending"===n)return e;switch(console.log({type:r,action:a,state:e.toJS()}),r){case"user/login":return e.set("profile",Object(Be.a)(Object(E.a)({isLoggedIn:!0,defaultCollection:a.defaultCollection},a.profile)));case"user/logout":return e.set("profile",Object(Be.a)({isLoggedIn:!1}));case"repo/list-contents":return e.setIn(["repo","contents"],Object(Be.a)(a.contents));case"user/list-collections":return e.set("collections",Object(Be.a)(a.collections)).set("myCollections",Object(Be.a)(a.myCollections));case"repo/choose-collection":return e.setIn(["repo","current"],Object(Be.a)(a.collection));case"user/create-collection":return e.updateIn(["myCollections"],(function(e){return e.unshift(Object(Be.a)(a.collection))}));case"user/start-session":return e.setIn(["gameSession"],Object(Be.a)(Object(E.a)({},a.session,{hasNext:!0,status:"playing"})));case"user/next-term":return e.setIn(["gameSession","term"],Object(Be.a)(a.term)).setIn(["gameSession","cursor"],a.cursor).setIn(["gameSession","hasNext"],a.hasNext);case"user/show-report":return e.setIn(["gameSession","status"],"done").set("report",Object(Be.a)(a.report));default:return e}},Ue=function(e){var t=Object(a.useReducer)(Fe,De),r=Object(n.a)(t,2),s=r[0],o=r[1];return c.a.createElement(b.Provider,{value:o},c.a.createElement(f.Provider,{value:s},c.a.createElement(Te,null)))};O().then((function(){o.a.render(c.a.createElement(Ue,null),document.getElementById("root"))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},84:function(e,t,r){e.exports=r(196)},90:function(e,t,r){},92:function(e,t,r){}},[[84,1,2]]]);
//# sourceMappingURL=main.68944de7.chunk.js.map