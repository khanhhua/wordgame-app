{"version":3,"sources":["components/context.js","components/network.js","components/Loader.js","components/indexeddb.js","components/session.js","components/Stage.js","components/constants.js","components/LineChartWeeklyPerformance.js","components/Report.js","pages/PlayPage.js","pages/LoginPage.js","components/github.js","components/CollectionList.js","pages/CollectionListPage.js","components/BarChartHistogram.js","components/reporting.js","pages/ReportPage.js","components/AppNav.js","components/EditCollectionModal.js","App.js","serviceWorker.js","components/reducer.js","index.js"],"names":["DispatchContext","React","createContext","StateContext","BASE_URL","process","request","url","method","a","body","localStorage","getItem","headers","fetch","catch","error","ok","handleResponse","res","contentType","get","match","status","json","text","api","uri","post","payload","JSON","stringify","put","patch","delete","Modal","isOpen","contentClassName","ModalBody","className","db","init","openDB","upgrade","createObjectStore","keyPath","createIndex","getDb","renewSession","transaction","store","openCursor","cursor","terms","push","value","continue","createSession","txSession","sessionId","Date","now","toString","Promise","all","add","id","corrects","wrongs","count","length","nextWordIndex","done","tx","clear","sort","Math","random","map","term","index","getSession","objectStore","session","getNextTerm","storeSession","getFromIndex","hasNext","updateStats","entry","correct","stats","concat","getSessionStats","reduce","acc","find","word","termId","gender","tags","includes","der","die","das","dispatch","useContext","state","history","useHistory","useState","busy","setStatus","showingAnswer","setShowingAnswer","timestamp","setTimestamp","fetchNextWord","useCallback","type","status_code","replace","expired","onSelectAnswer","answer","getIn","wordTags","seconds","article","showReport","report","onSkipClick","onNextClick","useEffect","onClick","style","wordBreak","ModalFooter","Button","color","Loader","defaultLineDataSeriesOptions","fill","lineTension","backgroundColor","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","pointBorderColor","pointBackgroundColor","pointBorderWidth","pointHoverRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","pointRadius","pointHitRadius","weeklyPerformance","labels","date","week","getMonth","getDate","confidence","confidence_factor","toFixed","correct_factor","data","datasets","label","width","height","options","scales","yAxes","ticks","max","min","stepSize","maintainAspectRatio","layout","padding","sessionRatios","role","LineChartWeeklyPerformance","toJS","props","recaptcha","setRecaptcha","pathParams","useParams","onStartSession","load","_recaptcha","onSuccess","response","token","accessToken","profileObj","setItem","profile","marginTop","Stage","Report","to","disabled","block","clientId","responseType","params","location","useLocation","console","log","Alert","toggle","isSignedIn","content","parse","Error","encoding","escaped","decodeURIComponent","escape","atob","parsed","getCollections","collections","getTermsByCollection","file","flag","decoded","split","filter","Boolean","line","parts","meaning","words","onReviewClick","onEditClick","editable","item","key","visible","name","newCollection","setNewCollection","newCollectionNameRef","useRef","then","myCollections","collection","onNewCollectionCreate","network","current","size","CollectionList","ModalHeader","Form","FormGroup","Label","Input","innerRef","borderWidth","hoverBackgroundColor","hoverBorderColor","histogram","correct_count","wrong_count","xAxes","distribution","getLocalReports","weekly","worst","worstPerformers","Object","entries","seconds_correct","total_count","total_seconds","round","slice","histogramData","floor","bgClasses","MAS","FEM","NEU","classFromTags","exec","setReport","Card","CardHeader","CardBody","Badge","pill","opacity","BarChartHistogram","onLogout","window","Navbar","light","NavbarBrand","Nav","exact","buttonText","onLogoutSuccess","debouncedNetwork","s","proxy","keys","forEach","defineProperty","_debounce","debounce","debouncedSearch","inputValue","callback","replaceState","leading","trailing","collectionId","setCollection","query","setQuery","shownCount","setShownCount","onCloseClick","onEditCollectionNameChanged","target","p","onNewTermSelected","choice","action","term_id","onTermRemoved","_c","onChange","placeholder","onInputChange","loadOptions","ListGroup","flush","ListGroupItem","App","path","LoginPage","AppNav","PlayPage","ReportPage","render","CollectionListPage","EditCollectionModal","hostname","initialState","fromJS","isLoggedIn","gameSession","set","defaultCollection","updateIn","unshift","setIn","Index","useReducer","reducer","Provider","initDb","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"qOAEaA,EAAkBC,IAAMC,gBACxBC,EAAeF,IAAMC,gB,iBCD5BE,EAAWC,yCAUXC,EAAO,uCAAG,WAAOC,EAAKC,GAAZ,6BAAAC,EAAA,6DAAoBC,EAApB,+BAA2B,KAC3BC,aAAaC,QAAb,UAVD,KAUC,WACRC,EAAU,CACd,eAAgB,oBAHJ,kBAUPC,MACLP,EACW,QAAXC,GAA+B,WAAXA,EAChB,CAAEK,UAASL,UACX,CACEK,UACAL,SACAE,SAENK,OAAM,SAACC,GACP,MAAO,CACLC,IAAI,EACJD,aAtBU,2CAAH,wDA2BPE,EAAc,uCAAG,WAAOC,GAAP,eAAAV,EAAA,yDAChBU,EADgB,yCAEZ,CAAEF,IAAI,IAFM,qBAMbG,EAAcD,EAAIN,QAAQQ,IAAI,mBACjBD,EAAYE,MAAM,QAPlB,sBAQbH,EAAII,QAAU,KARD,iCAWAJ,EAAIK,OAXJ,6CAUbP,IAAI,EACJD,MAXa,wCAeVG,EAAIK,QAfM,yBAmBFL,EAAIM,OAnBF,8CAkBfR,IAAI,EACJD,MAnBe,0FAuBZ,CAAEC,IAAI,EAAOD,MAAK,OAvBN,0DAAH,sDA2BdU,EAAM,CACVpB,UACMe,IAFI,SAEAM,GAAM,OAAD,0HACKrB,EAAQ,GAAD,OAAIF,GAAJ,OAAeuB,GAAO,OADlC,cACPR,EADO,yBAEND,EAAeC,IAFT,8CAITS,KANI,SAMCD,EAAKE,GAAU,OAAD,0HACLvB,EAAQ,GAAD,OACpBF,GADoB,OACTuB,GACd,OACAG,KAAKC,UAAUF,IAJM,cACjBV,EADiB,yBAMhBD,EAAeC,IANC,8CAQnBa,IAdI,SAcAL,EAAKE,GAAU,OAAD,0HACJvB,EAAQ,GAAD,OACpBF,GADoB,OACTuB,GACd,MACAG,KAAKC,UAAUF,IAJK,cAChBV,EADgB,yBAMfD,EAAeC,IANA,8CAQlBc,MAtBI,SAsBEN,EAAKE,GAAU,OAAD,0HACNvB,EAAQ,GAAD,OACpBF,GADoB,OACTuB,GACd,QACAG,KAAKC,UAAUF,IAJO,cAClBV,EADkB,yBAMjBD,EAAeC,IANE,8CAQpBe,OA9BI,SA8BGP,GAAM,OAAD,0HACErB,EAAQ,GAAD,OAAIF,GAAJ,OAAeuB,GAAO,UAD/B,cACVR,EADU,yBAETD,EAAeC,IAFN,+CAiBLO,I,oCC9GA,oBACb,kBAACS,EAAA,EAAD,CAAOC,QAAQ,EAAMC,iBAAiB,2BACpC,kBAACC,EAAA,EAAD,KACE,yBAAKC,UAAU,UAAf,iB,gBCAFC,EAAK,KAEIC,EAAI,uCAAG,sBAAAhC,EAAA,sEACLiC,YAPC,WAOe,EAAG,CAC1BC,QAD0B,SAClBH,GACJA,EAAGI,kBARa,WAQmB,CAC/BC,QAAS,OAEbL,EAAGI,kBAVU,QAUmB,CAC5BC,QAAS,OACVC,YAAY,QAAS,YARhB,OAChBN,EADgB,kDAAH,qDAaJO,EAAK,uCAAG,sBAAAtC,EAAA,0DACb+B,EADa,yCAENA,GAFM,uBAKXC,IALW,gCAMVD,GANU,2CAAH,qDChBLQ,EAAY,uCAAG,gCAAAvC,EAAA,sEACTsC,IADS,cACpBP,EADoB,gBAEPA,EAAGS,YAJN,QAI6B,QAAQC,MAAMC,aAFjC,OAEtBC,EAFsB,OAGpBC,EAAQ,GAHY,WAKnBD,EALmB,wBAMxBC,EAAMC,KAAKF,EAAOG,OANM,UAOTH,EAAOI,WAPE,QAOxBJ,EAPwB,uDAUnBK,EAAcJ,IAVK,4CAAH,qDAaZI,EAAa,uCAAG,WAAOJ,GAAP,qBAAA5C,EAAA,sEACVsC,IADU,cACrBP,EADqB,OAErBkB,EAAYlB,EAAGS,YAlBF,WAkB4B,aACzCU,EAAYC,KAAKC,MAAMC,WAHF,SAIrBC,QAAQC,IAAI,CAChBN,EAAUR,MAAMe,IAAI,CAClBC,GAAIP,EACJQ,SAAU,EACVC,OAAQ,EACRC,MAAOhB,EAAMiB,OACbC,cAAe,IAEjBb,EAAUc,OAZe,cAerBC,EAAKjC,EAAGS,YA9BE,QA8BqB,aAfV,UAgBrBwB,EAAGvB,MAAMwB,QAhBY,yBAiBrBX,QAAQC,IACZX,EACGsB,MAAK,kBAAMC,KAAKC,SAAW,MAC3BC,KAAI,SAACC,EAAMC,GACV,OAAOP,EAAGvB,MAAMe,IAAT,eACFc,EADE,CAELC,eAvBmB,yBA4BrBP,EAAGD,KA5BkB,iCA8BpBb,GA9BoB,4CAAH,sDAiCbsB,EAAU,uCAAG,WAAOtB,GAAP,mBAAAlD,EAAA,sEACPsC,IADO,cAClBP,EADkB,OAElBU,EAAQV,EAAGS,YAnDE,YAmDwBiC,YAnDxB,YAiDK,SAGFhC,EAAM7B,IAAIsC,GAHR,cAGlBwB,EAHkB,yBAKjBA,GALiB,2CAAH,sDAQVC,EAAW,uCAAG,WAAOzB,GAAP,yBAAAlD,EAAA,sEACRsC,IADQ,cACnBP,EADmB,OAEnB6C,EAAe7C,EAClBS,YA5DgB,WA4DU,aAC1BiC,YA7DgB,YAyDM,SAKHG,EAAahE,IAAIsC,GALd,UAKnBwB,EALmB,OAMjBZ,EAAyBY,EAAzBZ,cAAeF,EAAUc,EAAVd,OACA,IAAnBE,EAPqB,0CAQhB,MARgB,yBAUnBc,EAAarD,IAAb,eACDmD,EADC,CAEJZ,cAAeA,EAAgB,EAAIF,EAAQE,EAAgB,GAAK,KAZzC,yBAeN/B,EAAG8C,aAvEN,QAuE8B,QAASf,GAf9B,eAenBQ,EAfmB,yBAiBlB,CACLA,OACAQ,QAAShB,EAAgB,EAAIF,IAnBN,4CAAH,sDAuBXmB,EAAW,uCAAG,WAAO7B,EAAW8B,GAAlB,qBAAAhF,EAAA,sEACRsC,IADQ,cACnBP,EADmB,OAEnBiC,EAAKjC,EAAGS,YAlFK,WAkFqB,aAClCoC,EAAeZ,EAAGS,YAnFL,YAgFM,SAIHG,EAAahE,IAAIsC,GAJd,cAInBwB,EAJmB,iBAKnBE,EAAarD,IAAb,eACDmD,EADC,CAEJhB,SAAUgB,EAAQhB,SAAWsB,EAAMC,QACnCtB,OAAQe,EAAQf,QAAUqB,EAAMC,QAChCC,OAAQR,EAAQQ,OAAS,IAAIC,OAAOH,MATb,yBAWnBhB,EAAGD,KAXgB,iCAalB,CACLvD,IAAI,IAdmB,4CAAH,wDAkBX4E,EAAe,uCAAG,WAAOlC,GAAP,uBAAAlD,EAAA,6DACvB4C,EAAQ,GADe,SAEZN,IAFY,cAEvBP,EAFuB,gBAGVA,EAAGS,YApGN,SAoG6BC,MAAMC,aAHtB,OAGzBC,EAHyB,kBAKtBA,EALsB,wBAM3BC,EAAMC,KAAKF,EAAOG,OANS,UAOZH,EAAOI,WAPK,QAO3BJ,EAP2B,+CAUPZ,EAAGnB,IA5GN,WA4GwBsC,GAVd,eAUvBwB,EAVuB,OAYvBQ,GAASR,EAAQQ,OAAS,IAAIG,QAClC,SAACC,EAAKN,GACJ,IAAMV,EAAO1B,EAAM2C,MAAK,qBAAGC,OAAwBR,EAAMS,UACnDC,EAASpB,EAAKqB,KAAKC,SAAS,OAC9B,MACAtB,EAAKqB,KAAKC,SAAS,OACnB,MACAtB,EAAKqB,KAAKC,SAAS,OACnB,MACA,KACJ,OAAKF,GAIDV,EAAMC,QACRK,EAAII,GAAQhC,UAAY,EAExB4B,EAAII,GAAQ/B,QAAU,EAGjB2B,GATEA,IAWX,CACEO,IAAK,CAAEnC,SAAU,EAAGC,OAAQ,GAC5BmC,IAAK,CAAEpC,SAAU,EAAGC,OAAQ,GAC5BoC,IAAK,CAAErC,SAAU,EAAGC,OAAQ,KArCH,kBAyCtBuB,GAzCsB,4CAAH,sDCjFb,cAAoB,IAAjBhC,EAAgB,EAAhBA,UACV8C,EAAWC,qBAAW1G,GACtB2G,EAAQD,qBAAWvG,GACnByG,EAAUC,cAHgB,EAKJC,mBAAS,CAAEC,MAAM,EAAO/F,MAAO,OAL3B,mBAKzBO,EALyB,KAKjByF,EALiB,OAMUF,mBAAS,MANnB,mBAMzBG,EANyB,KAMVC,EANU,OAQEJ,mBAAS,MARX,mBAQzBK,EARyB,KAQdC,EARc,KAU1BC,EAAgBC,sBAAW,sBAAC,kCAAA7G,EAAA,6DAChCgG,EAAS,CAAEc,KCnBiB,iBDmBOhG,OC5BT,YD2BM,SAEO6D,EAAYzB,GAFnB,mBAExBoB,EAFwB,EAExBA,KAAMQ,EAFkB,EAElBA,QAASvE,EAFS,EAETA,MAElB+D,EAJ2B,oBAKJ,MAAtB/D,EAAMwG,YALoB,wBAM5B7G,aAAa+D,QACbkC,EAAQa,QAAQ,SAAU,CAAEC,SAAS,IAPT,kCAW9BjB,EAAS,CAAEc,KC7Be,iBD6BShG,OCvCb,QDuCmCP,UAX3B,2BAchCyF,EAAS,CAAEc,KChCiB,iBDgCOhG,OC3Cd,KD2CiCwD,OAAMQ,YAC5D6B,EAAaxD,KAAKC,MAAQ,KAfM,4CAgB/B,CAAC4C,EAAUE,EAAOhD,IAEfgE,EAAiBL,sBAAW,uCAChC,WAAOM,GAAP,yBAAAnH,EAAA,6DACQyF,EAASS,EAAMkB,MAAM,CAAC,cAAe,OAAQ,OAC7CC,EAAWnB,EAAMkB,MAAM,CAAC,cAAe,OAAQ,SAC/CnC,EAAUoC,EAASzB,SAASuB,GAHpC,SAK8BpC,EAAY7B,EAAW,CACjDuC,SACAR,UACAqC,QAASnE,KAAKC,MAAQ,IAAOsD,IARjC,mBAKUlG,EALV,EAKUA,GAAID,EALd,EAKcA,MAKPC,EAVP,oBAW8B,MAAtBD,EAAMwG,YAXd,wBAYM7G,aAAa+D,QACbkC,EAAQa,QAAQ,SAAU,CAAEC,SAAS,IAb3C,gEAmBOhC,EAnBP,iBAoBIwB,EAAiB,CACfxB,UACAsC,QAASF,EAASzB,SAAS,OACvB,MACAyB,EAASzB,SAAS,OAClB,MACA,QA1BV,4BA6BQM,EAAMkB,MAAM,CAAC,cAAe,YA7BpC,kCA8BYR,IA9BZ,gCAgCMY,IAhCN,4CADgC,sDAqChC,CAACxB,EAAUU,EAAWR,EAAMkB,MAAM,CAAC,cAAe,WAG9CI,EAAaX,sBAAW,sBAAC,8BAAA7G,EAAA,6DAC7BuG,EAAU,CAAED,MAAM,IAEZpD,EAAYgD,EAAMkB,MAAM,CAAC,cAAe,OAE9CpB,EAAS,CAAEc,KChFmB,mBDgFOhG,OC1FX,UD0FmCoC,cALhC,SAMTkC,EAAgBlC,GANP,OAMvBgC,EANuB,OAQ7Bc,EAAS,CACPc,KCpF4B,mBDqF5BhG,OCjGmB,KDkGnB2G,OAAQ,CAAE/C,QAASQ,KAXQ,2CAa5B,CAACc,EAAUE,EAAMkB,MAAM,CAAC,cAAe,WAEpCM,EAAcb,sBAAW,sBAAC,sBAAA7G,EAAA,sEACxB4G,IADwB,2CAE7B,CAACZ,EAAUE,EAAMkB,MAAM,CAAC,cAAe,WAEpCO,EAAcd,sBAAW,sBAAC,sBAAA7G,EAAA,yDAC9ByG,EAAiB,OACbP,EAAMkB,MAAM,CAAC,cAAe,YAFF,gCAGtBR,IAHsB,6BAK5BY,IAL4B,2CAO7B,CACDxB,EACAE,EAAMkB,MAAM,CAAC,cAAe,SAC5BlB,EAAMkB,MAAM,CAAC,cAAe,cAG9BQ,qBAAU,WACR,sBAAC,sBAAA5H,EAAA,sEACO4G,IADP,0CAAD,KAGC,IAEH,IAAMtC,EAAO4B,EAAMkB,MAAM,CAAC,cAAe,SAEzC,OACE,6BAAStF,UAAU,OACjB,yBAAKA,UAAU,OACb,wBAAIA,UAAU,6BAAd,SACEwC,GAAQ,uBAAGxC,UAAU,eAAb,gBACPwC,GACD,oCACE,yBAAKxC,UAAU,kBACb,yBAAKA,UAAU,oCACZwC,EAAK1D,IAAI,SAEZ,4BAAQkB,UAAU,uBAAlB,eAGF,yBAAKA,UAAU,uBACb,yBAAKA,UAAU,kBACb,4BACEA,UAAU,0DACV+F,QAAS,kBAAMX,EAAe,SAFhC,OAMA,4BACEpF,UAAU,yDACV+F,QAAS,kBAAMX,EAAe,SAFhC,OAMA,4BACEpF,UAAU,uDACV+F,QAAS,kBAAMX,EAAe,SAFhC,QAOF,yBAAKpF,UAAU,wBACb,4BACEA,UAAU,yBACV+F,QAASH,GAFX,SAOF,yBAAK5F,UAAU,oBACb,4BAAQA,UAAU,gBAAgB+F,QAASL,GAA3C,0BAQPhB,GACD,kBAAC9E,EAAA,EAAD,CAAOC,QAAQ,GACb,kBAACE,EAAA,EAAD,KACE,yBACEC,UAAU,wBACVgG,MAAO,CAAEC,UAAW,eAEpB,0BAAMjG,UAAU,kCACbwC,EAAK1D,IAAI,SALd,KAOI,6BACF,0BAAMkB,UAAU,oBAAoB0E,EAAce,WAGtD,kBAACS,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAQC,MAAM,UAAUL,QAASF,EAAa7F,UAAU,WAAxD,YAMHhB,EAAOwF,MAAQ,kBAAC6B,EAAD,Q,QErMlBC,EAA+B,CACnCC,MAAM,EACNC,YAAa,GACbC,gBAAiB,sBACjBC,YAAa,kBACbC,eAAgB,OAChBC,WAAY,GACZC,iBAAkB,EAClBC,gBAAiB,QACjBC,iBAAkB,qBAClBC,qBAAsB,OACtBC,iBAAkB,EAClBC,iBAAkB,EAClBC,0BAA2B,qBAC3BC,sBAAuB,sBACvBC,sBAAuB,EACvBC,YAAa,EACbC,eAAgB,IAKH,cAA4B,IAAzBC,EAAwB,EAAxBA,kBACVC,EAASD,EAAkBjF,KAAI,gBAHnBmF,EAGsBC,EAAH,EAAGA,KAAH,OAHnBD,EAIL,IAAIrG,KAAY,EAAPsG,EAAW,MAAQ,KAJxB,UAAaD,EAAKE,WAAa,EAA/B,YAAoCF,EAAKG,cAMpDC,EAAaN,EAAkBjF,KAAI,mBAClB,IADkB,EAAGwF,mBAChBC,QAAQ,MAE9B7E,EAAUqE,EAAkBjF,KAAI,mBAClB,IADkB,EAAG0F,gBAChBD,QAAQ,MAGjC,OACE,kBAAC,IAAD,CACEE,KAAM,CACJT,SACAU,SAAU,CAAC,aAEPC,MAAO,UACPF,KAAM/E,GACHmD,GAJG,aAON8B,MAAO,aACPF,KAAMJ,GACHxB,EATG,CAUNG,gBAAiB,UACjBC,YAAa,cAInB2B,MAAO,IACPC,OAAQ,GACRC,QAAS,CACPC,OAAQ,CACNC,MAAO,CAAC,CAAEC,MAAO,CAAEC,IAAK,IAAKC,IAAK,EAAGC,SAAU,OAEjDC,qBAAqB,EACrBC,OAAQ,CACNC,QAAS,OCvDJ,aACb,IAAM5E,EAAQD,qBAAWvG,GAEnBgF,EAAUwB,EAAMkB,MAAM,CAAC,SAAU,YACjCkC,EAAoBpD,EAAMkB,MAAM,CAAC,SAAU,uBAE3C2D,EAEFrG,EAAQ0C,MAAM,CAAC,MAAO,cACrB1C,EAAQ0C,MAAM,CAAC,MAAO,aAAe1C,EAAQ0C,MAAM,CAAC,MAAO,YAH1D2D,EAKFrG,EAAQ0C,MAAM,CAAC,MAAO,cACrB1C,EAAQ0C,MAAM,CAAC,MAAO,aAAe1C,EAAQ0C,MAAM,CAAC,MAAO,YAN1D2D,EAQFrG,EAAQ0C,MAAM,CAAC,MAAO,cACrB1C,EAAQ0C,MAAM,CAAC,MAAO,aAAe1C,EAAQ0C,MAAM,CAAC,MAAO,YAGhE,OACE,6BAAStF,UAAU,OACjB,yBAAKA,UAAU,OACb,sCACA,yBAAKA,UAAU,QACb,yBAAKA,UAAU,eACb,+CAEF,yBAAKA,UAAU,aACb,yBAAKA,UAAU,kBACb,yBAAKA,UAAU,kBAAf,OACA,yBAAKA,UAAU,iBACb,yBACEA,UAAU,4BACVkJ,KAAK,cACLlD,MAAO,CACLqC,MAAM,GAAD,OAAyB,IAApBY,EAAL,UAKb,yBAAKjJ,UAAU,kBACb,yBAAKA,UAAU,kBAAf,OACA,yBAAKA,UAAU,iBACb,yBACEA,UAAU,2BACVkJ,KAAK,cACLlD,MAAO,CACLqC,MAAM,GAAD,OAAyB,IAApBY,EAAL,UAKb,yBAAKjJ,UAAU,kBACb,yBAAKA,UAAU,kBAAf,OACA,yBAAKA,UAAU,iBACb,yBACEA,UAAU,yBACVkJ,KAAK,cACLlD,MAAO,CACLqC,MAAM,GAAD,OAAyB,IAApBY,EAAL,cAOdzB,GACD,yBAAKxH,UAAU,aACb,yBAAKA,UAAU,eACb,wBAAIA,UAAU,QAAd,kBAEF,yBAAKA,UAAU,aACb,kBAACmJ,EAAD,CACE3B,kBAAmBA,EAAkB4B,c,yBC1DtC,WAACC,GACd,IAAMnF,EAAWC,qBAAW1G,GACtB2G,EAAQD,qBAAWvG,GAFD,EAGU2G,mBAAS,MAHnB,mBAGjB+E,EAHiB,KAGNC,EAHM,KAIlBlF,EAAUC,cACVkF,EAAaC,cAEbC,EAAiB3E,sBAAW,sBAAC,4BAAA7G,EAAA,sEAETuC,IAFS,OAE3BW,EAF2B,OAIjCiD,EAAQa,QAAR,gBAAyB9D,IAJQ,2CAKhC,CAACkI,IAEJxD,qBAAU,WACR,sBAAC,4BAAA5H,EAAA,sEAC0ByL,eAlBJ,4CAiBtB,OACOC,EADP,OAECL,EAAaK,GAFd,0CAAD,MAMF9D,qBAAU,WACR,sBAAC,4BAAA5H,EAAA,0DACKsL,EAAWpI,UADhB,gCAEyBsB,EAAW8G,EAAWpI,WAF/C,OAESwB,EAFT,OAGGsB,EAAS,CAAEc,KHrCiB,qBGqCWhG,OH/CtB,KG+CyC4D,YAH7D,sBAKOxE,aAAaC,QAAQ,YACvBgG,EAAQa,QAAQ,gBAEhBb,EAAQa,QAAQ,UARrB,0CAAD,KAYC,CAAChB,EAAUsF,EAAWpI,YAEzB,IAAMyI,EAAY9E,sBAAW,uCAC3B,WAAO+E,GAAP,iBAAA5L,EAAA,sDACuB6L,EAAsBD,EAAnCE,YAAoBC,EAAeH,EAAfG,WAE5B7L,aAAa8L,QAAQ,gBAAiBD,GACtC7L,aAAa8L,QAAQ,WAAYH,GACjC7F,EAAS,CACPc,KHzDoB,aG0DpBhG,OHlEiB,KGmEjB+K,QACAI,QAASF,IAEX5F,EAAQa,QAAQ,gBAXlB,2CAD2B,sDAc3B,CAAChB,EAAUG,IAGPzB,EAAUwB,EAAMkB,MAAM,CAAC,gBAE7B,OACE,yBAAKtF,UAAU,yBACV4C,GAAWA,EAAQ9D,IAAI,QACxB,6BAASkB,UAAU,OACjB,yBAAKA,UAAU,OACb,yBACEA,UAAU,+BACVgG,MAAO,CAAEoE,UAAW,QAFtB,cAUJxH,IACAA,EAAQ9D,IAAI,OHxFkB,YGyF9B8D,EAAQ9D,IAAI,YACT,kBAACuL,EAAD,CAAOjJ,UAAWwB,EAAQ9D,IAAI,WAEjC8D,IACAA,EAAQ9D,IAAI,OH5Fe,SG6F3B8D,EAAQ9D,IAAI,YACT,kBAACwL,EAAD,CAAQlJ,UAAWwB,EAAQ9D,IAAI,WAElC8D,IACAA,EAAQ9D,IAAI,OHjGe,SGkG3B8D,EAAQ9D,IAAI,YAEZ,6BAASkB,UAAU,OACjB,yBAAKA,UAAU,OACZoE,EAAMkB,MAAM,CAAC,UAAW,gBACvB,kBAAC,IAAD,CAAMtF,UAAU,gCAAgCuK,GAAG,gBAAnD,wBAIAnG,EAAMkB,MAAM,CAAC,UAAW,gBACxB,oCACE,yBAAKtF,UAAU,mCACb,yBAAKA,UAAU,SACb,kBAACmG,EAAA,EAAD,CACEqE,UAAWlB,EACXlD,MAAM,UACNqE,OAAK,EACL1E,QAAS2D,GAJX,gBAWJ,kBAAC,IAAD,CACEgB,SACE,2EAEFb,UAAWA,EACXc,aAAc,OACd3K,UAAU,SAEZ,uBAAGA,UAAU,cAAb,0C,SC5HD,aAAO,IAAD,EACeuE,mBAAS,MADxB,mBACZ+E,EADY,KACDC,EADC,KAEbrF,EAAWC,qBAAW1G,GACtB4G,EAAUC,cACVsG,EAASnB,cACToB,EAAWC,cAEXjB,EAAY9E,sBAAW,uCAC3B,WAAO+E,GAAP,iBAAA5L,EAAA,sDACuB6L,EAAsBD,EAAnCE,YAAoBC,EAAeH,EAAfG,WAE5B7L,aAAa8L,QAAQ,aAAc3K,KAAKC,UAAUyK,IAClD7L,aAAa8L,QAAQ,WAAYH,GACjC7F,EAAS,CACPc,KJlBoB,aImBpBhG,OJ3BiB,KI4BjB+K,UAEF1F,EAAQa,QAAQ,gBAVlB,2CAD2B,sDAa3B,CAAChB,EAAUG,IAEPqF,EAAiB3E,sBAAW,sBAAC,4BAAA7G,EAAA,sEAETgD,EAAc,IAFL,OAE3BE,EAF2B,OAGjCiD,EAAQa,QAAR,gBAAyB9D,IAHQ,2CAIhC,CAACkI,IAUJ,OARAxD,qBAAU,WACRiF,QAAQC,IAAIJ,GACZ,sBAAC,4BAAA1M,EAAA,sEAC0ByL,eAjCJ,4CAgCtB,OACOC,EADP,OAECL,EAAaK,GAFd,0CAAD,MAOA,yBAAK5J,UAAU,2BACT6K,EAASzG,QAASyG,EAASzG,MAAMe,UACnC,kBAAC8F,EAAA,EAAD,CACEjL,UAAU,mBACVH,QAAQ,EACRuG,MAAM,UACN8E,OAAQ,kBAAM7G,EAAQa,QAAQ,YAE9B,wBAAIlF,UAAU,iBAAd,6BACA,uBAAGA,UAAU,iCAAb,oEAKJ,6BAASA,UAAU,OACjB,yBAAKA,UAAU,OACb,wBACEgG,MAAO,CACLoE,UAAW,QAFf,iBAOA,kBAAC,IAAD,CACEM,SACE,2EAEFb,UAAWA,EACXc,aAAc,QACdQ,YAAY,IAEd,uBAAGnL,UAAU,cAAb,qEAKJ,yBAAKA,UAAU,8BACb,yBAAKA,UAAU,SACb,kBAACmG,EAAA,EAAD,CACEqE,UAAWlB,EACXlD,MAAM,UACNqE,OAAK,EACL1E,QAAS2D,GAJX,gB,sDCrFK0B,G,mFAAf,WAAuBpN,EAAKqN,GAA5B,qBAAAnN,EAAA,sEACoBiB,EAAIpB,QAAQC,EAAK,OADrC,WACQY,EADR,QAEWF,GAFX,sBAGU,IAAI4M,MAAM,eAHpB,uBAMqB1M,EAAIK,OANzB,UAOwB,YADhBiJ,EANR,QAOWqD,SAPX,uBAQU,IAAID,MAAM,eARpB,eAWQE,EAAUC,mBAAmBC,OAAOC,KAAKzD,EAAKkD,WAC9CQ,EAASP,EAAMG,GAZvB,kBAaSI,GAbT,6C,sBAgBO,IAAMC,GAAc,uCAAG,4BAAA3N,EAAA,4DAE1B,qFAF0B,kBAIPkN,GAFnB,qFAEgC7L,KAAK8L,OAJX,cAIpBpM,EAJoB,yBAKnBA,EAAK6M,aALc,yDAOnB,IAPmB,yDAAH,qDAWdC,GAAoB,uCAAG,+CAAA7N,EAAA,6DAAS8N,EAAT,EAASA,KAAQC,EAAjB,+BAAwB,KACpDjO,EAD4B,gFACmDgO,GADnD,kBAGZZ,GAAQpN,GAAK,SAACkO,GAChC,OAAOA,EACJC,MAAM,MACNC,OAAOC,SACP9J,KAAI,SAAC+J,GACJ,IAAMC,EAAQD,EAAKH,MAAM,KACzB,MAAO,CACLxK,GAAI4K,EAAM,GACV7I,KAAM6I,EAAM,GACZC,QAASD,EAAM,GACf1I,KAAM0I,EAAM,OAGfH,QAAO,SAAC5J,GACP,OAAQyJ,GACN,QACE,OAAO,EACT,IAAK,OAAS,IACJpI,EAASrB,EAATqB,KACR,OACEA,EAAKC,SAAS,QACdD,EAAKC,SAAS,QACdD,EAAKC,SAAS,cAzBM,cAG1B2I,EAH0B,OA+BhC1B,QAAQC,IAAI,CAAEyB,UA/BkB,kBAgCzBA,GAhCyB,2DAkCzB,IAlCyB,0DAAH,sDC3BlB,eAAkD,IAA/CX,EAA8C,EAA9CA,YAAaY,EAAiC,EAAjCA,cAAeC,EAAkB,EAAlBA,YACtCC,EAAkC,oBAAhBD,EAExB,OACE,yBAAK3M,UAAU,+BACZ8L,EAAYvJ,KAAI,SAACsK,GAAD,OACf,yBAAKC,IAAKD,EAAK/N,IAAI,MAAOkB,UAAU,wBACjC6M,EAAK/N,IAAI,QACV,yBAAKkB,UAAU,uBACb,yBAAKA,UAAU,0BACZ4M,GACC,4BACE5M,UAAU,uBACV+F,QAAS,kBAAM4G,EAAYE,KAF7B,QAOF,4BACE7M,UAAU,yBACV+F,QAAS,kBAAM2G,EAAcG,KAF/B,kBCaC,YAACxD,GACd,IAAMnF,EAAWC,qBAAW1G,GACtB2G,EAAQD,qBAAWvG,GAFD,EAGkB2G,mBAAS,CACjDwI,SAAS,EACTC,KAAM,KALgB,mBAGjBC,EAHiB,KAGFC,EAHE,KAOlBC,EAAuBC,mBACvB/I,EAAUC,cAEhBwB,qBAAU,WACR,sBAAC,oCAAA5H,EAAA,sEAMW2N,KAAiBwB,MAAK,SAACvB,GAAD,MAAkB,CAChDA,cACAwB,cAAe,GACf5O,IAAI,EACJD,MAAO,SAVV,mBAEGC,EAFH,EAEGA,GACAoN,EAHH,EAGGA,YACAwB,EAJH,EAIGA,cACA7O,EALH,EAKGA,MAQGC,EAbN,oBAc6B,MAAtBD,EAAMwG,YAdb,wBAeK7G,aAAa+D,QACbkC,EAAQa,QAAQ,SAAU,CAAEC,SAAS,IAhB1C,kCAoBGjB,EAAS,CACPc,KPpD6B,wBOqD7BhG,OPjEkB,QOkElBP,UAvBL,2BA4BCyF,EAAS,CACPc,KP5D+B,wBO6D/BhG,OP1EiB,KO2EjB8M,cACAwB,kBAhCH,2CAAD,KAmCC,CAACpJ,IAEJ,IAAMwI,EAAa,uCAAG,WAAOa,GAAP,iBAAArP,EAAA,6DACpBgG,EAAS,CAAEc,KPxEqB,qBOwEOhG,OPhFb,YO+EN,SAEA+M,GAAqB,CAAEC,KAAMuB,EAAWzO,IAAI,SAAW,QAFvD,cAEdgC,EAFc,gBAGII,EAAcJ,GAHlB,OAGdM,EAHc,OAKpBiD,EAAQtD,KAAR,gBAAsBK,IALF,2CAAH,sDAQboM,EAAwBzI,sBAAW,sBAAC,oCAAA7G,EAAA,6DAExCgG,EAAS,CAAEc,KADLA,EP3E8B,yBO4EnBhG,OPzFS,YOuFc,SAGAyO,EAAQpO,KAC9C,sBACA,CACE2N,KAAMG,EAAqBO,QAAQ1M,QANC,mBAGhCtC,EAHgC,EAGhCA,GAAI6O,EAH4B,EAG5BA,WAAY9O,EAHgB,EAGhBA,MAMnBC,EATmC,oBAUZ,MAAtBD,EAAMwG,YAV4B,wBAWpC7G,aAAa+D,QACbkC,EAAQa,QAAQ,SAAU,CAAEC,SAAS,IAZD,oDAgB/BjB,EAAS,CAAEc,OAAMhG,OPxGF,QOwGwBP,WAhBR,QAmBxCyF,EAAS,CAAEc,OAAMhG,OP5GI,KO4GeuO,eACpCL,EAAiB,CAAEH,SAAS,IApBY,4CAqBvC,CAAC7I,EAAUiJ,IAERR,EAAc5H,sBAAW,uCAC7B,WAAOwI,GAAP,SAAArP,EAAA,sDACEmG,EAAQtD,KAAR,uBAA6BwM,EAAWzO,IAAI,QAD9C,2CAD6B,sDAI7B,CAACuF,IAGGyH,EAAc1H,EAAMtF,IAAI,eACxBwO,EAAgBlJ,EAAMtF,IAAI,iBAEhC,OACE,yBAAKkB,UAAU,qCACb,6BAASA,UAAU,OACjB,yBAAKA,UAAU,UACTsN,IAAiBA,EAAcK,OACjC,oCACE,yBAAK3N,UAAU,SACb,4BACE+F,QAAS,kBAAMmH,EAAiB,CAAEH,SAAS,KAC3C/M,UAAU,yCAFZ,OAMA,iDAEF,kBAAC4N,GAAD,CACEjB,YAAaA,EACbb,YAAawB,EACbZ,cAAeA,OAIlBZ,GAAeA,EAAY6B,OAC5B,uBAAG3N,UAAU,eAAb,iBAEE8L,IAAeA,EAAY6B,OAC7B,oCACE,wBAAI3N,UAAU,QAAd,eACA,kBAAC4N,GAAD,CACE9B,YAAaA,EACbY,cAAeA,SAMtBO,EAAcF,SACf,kBAACnN,EAAA,EAAD,CAAOC,OAAQoN,EAAcF,SAC3B,kBAACc,EAAA,EAAD,CAAa3C,OAAQ,kBAAMgC,EAAiB,CAAEH,SAAS,MAAvD,kBAGA,kBAAChN,EAAA,EAAD,KACE,kBAAC+N,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,aACA,kBAACC,EAAA,EAAD,CAAOC,SAAUf,OAIvB,kBAACjH,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAQJ,QAASyH,EAAuBpH,MAAM,WAA9C,c,wCCzKNE,GAA+B,CACnCG,gBAAiB,sBACjBC,YAAa,kBACbyH,YAAa,EACbC,qBAAsB,sBACtBC,iBAAkB,mBAGL,eAAoB,IAAjBC,EAAgB,EAAhBA,UAChB,OACE,kBAAC,IAAD,CACEjG,MAAO,IACPC,OAAQ,GACRJ,KAAM,CACJT,OAAQ6G,EAAU/L,KAAI,qBAAGiD,WACzB2C,SAAU,CAAC,aAEPC,MAAO,4BACPF,KAAMoG,EAAU/L,KAAI,qBAAGgM,kBACpBjI,IAJG,aAON8B,MAAO,8BACPF,KAAMoG,EAAU/L,KAAI,qBAAGiM,gBACpBlI,GATG,CAUNG,gBAAiB,uBACjBC,YAAa,qBAInB6B,QAAS,CACPC,OAAQ,CACNC,MAAO,CAAC,CAAEC,MAAO,CAAEE,IAAK,KACxB6F,MAAO,CACL,CACEC,aAAc,gBCpCfC,GAAe,uCAAG,qCAAAzQ,EAAA,+DAAQ0Q,OAAR,EAAgBC,MAAhB,EAAuBP,UAC9ClL,EAAQ,GADe,SAEV5C,IAFU,cAErBP,EAFqB,gBAGRA,EAAGS,YZFE,YYEwBC,MAAMC,aAH3B,OAGvBC,EAHuB,kBAIpBA,EAJoB,wBAKnBA,EAAOG,MAAMoC,QACbA,EAAQA,EAAMC,OAAOxC,EAAOG,MAAMoC,QANf,UAQRvC,EAAOI,WARC,QAQvBJ,EARuB,qCAWrBiO,EAAkBC,OAAOC,QAAQ5L,EAAMG,QAAO,SAACC,EAAD,GAAwC,IAAhCG,EAA+B,EAA/BA,OAAQR,EAAuB,EAAvBA,QAASqC,EAAc,EAAdA,QACnEsH,EAAMnJ,EACNmJ,KAAOtJ,IACTA,EAAIsJ,GAAO,CAAEyB,cAAe,EAAGU,gBAAiB,EAAGC,YAAa,EAAGC,cAAe,IAEtF,IAAMjM,EAAQM,EAAIsJ,GASnB,OAPK3J,IACAD,EAAMqL,eAAiB,EACvBrL,EAAM+L,iBAAmBzJ,GAE7BtC,EAAMgM,aAAe,EACrBhM,EAAMiM,eAAiB3J,EAEjBhC,IACP,KACEjB,KAAI,mCAAEuK,EAAF,YAASyB,EAAT,EAASA,cAAeW,EAAxB,EAAwBA,YAAaD,EAArC,EAAqCA,gBAAiBE,EAAtD,EAAsDA,cAAtD,MAA4E,CAC7EzL,KAAMoJ,EACN7E,eAAgB5F,KAAK+M,MAAM,IAAMb,GAA+B,EAAdW,IAAsB,IACxEnH,kBAAmB1F,KAAK+M,MAAM,IAAMH,GAAmC,EAAhBE,IAAwB,QAElF/M,MAAK,uBAAG6F,eAAH,EAA0BA,kBAC/BoH,MAAM,EAAG,IAERC,EAAgBP,OAAOC,QAAQ5L,EAAMG,QAAO,SAACC,EAAD,GAAgC,IAAxBL,EAAuB,EAAvBA,QAASqC,EAAc,EAAdA,QACzDsH,EAAMzK,KAAKkN,MAAM/J,GACjBsH,KAAOtJ,IACTA,EAAIsJ,GAAO,CAAEyB,cAAe,EAAGC,YAAa,IAEhD,IAAItL,EAAQM,EAAIsJ,GAOhB,OANI3J,EACAD,EAAMqL,eAAiB,EAEvBrL,EAAMsL,aAAe,EAGlBhL,IACR,KACEjB,KAAI,mCAAEuK,EAAF,KAAO5J,EAAP,yBAAqBsC,QAASsH,GAAQ5J,MAC1Cd,MAAK,uBAAGoD,QAAH,EAAmBA,WAlDF,kBAoDpB,CACHsJ,kBACAtH,kBAAmB,GACnB8G,UAAWgB,IAvDY,4CAAH,sDCMtBE,GAAY,CAChBC,IAAK,eACLC,IAAK,cACLC,IAAK,aAGDC,GAAgB,SAAC/L,GACrB,IAAM9E,EAAQ,cAAc8Q,KAAKhM,GACjC,OAAI9E,EACKyQ,GAAUzQ,EAAM,IAElB,IAGM,YAACsK,GAAW,IAAD,EACI9E,mBAAS,CAAEC,MAAM,EAAO/F,MAAO,OADnC,mBACjBO,EADiB,KACTyF,EADS,OAEIF,mBAAS,CACnCuK,gBAAiB,GACjBtH,kBAAmB,GACnB8G,UAAW,KALW,mBAEjB3I,EAFiB,KAETmK,EAFS,KAqBxB,OAdAhK,qBAAU,WACR,sBAAC,kCAAA5H,EAAA,6DACCuG,EAAU,CAAED,MAAM,IADnB,SAE8DmK,GAAgB,IAF9E,gBAEQG,EAFR,EAEQA,gBAAiBtH,EAFzB,EAEyBA,kBAAkB8G,EAF3C,EAE2CA,UAE1C7J,EAAU,CAAED,MAAM,IAClBsL,EAAU,CACRhB,kBACAtH,oBACA8G,cARH,0CAAD,KAWC,IAGD,yBAAKtO,UAAU,2BACVhB,EAAOwF,MAAQ,kBAAC6B,EAAD,MAClB,6BAASrG,UAAU,OACjB,yBAAKA,UAAU,OACb,sCAEA,kBAAC+P,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,KACE,wBAAIhQ,UAAU,QAAd,uBAEF,kBAACiQ,GAAA,EAAD,KACGtK,EAAOmJ,gBAAgBvM,KAAI,SAACsK,GAAD,OAC1B,kBAACqD,GAAA,EAAD,CACEC,MAAI,EACJnQ,UAAS,wBAAmB4P,GAAc/C,EAAKhJ,OAC/CmC,MAAO,CAAEoK,QAAS,KAAOvD,EAAK9E,oBAE7B8E,EAAKnJ,KACN,0BAAM1D,UAAU,QAA8B,IAAtB6M,EAAK5E,eAA7B,WAMR,kBAAC8H,GAAA,EAAD,CAAM/P,UAAU,QACd,kBAACgQ,GAAA,EAAD,KACE,wBAAIhQ,UAAU,QAAd,gBAEF,kBAACiQ,GAAA,EAAD,QACMtK,GAAUA,EAAO2I,WAAa3I,EAAO2I,UAAUvM,SACjD,kBAACsO,GAAD,CAAmB/B,UAAW3I,EAAO2I,eAGrC3I,GACAA,EAAO6B,mBACP7B,EAAO6B,kBAAkBzF,SAEzB,kBAACoH,EAAD,CACE3B,kBAAmB7B,EAAO6B,0B,8BC3E7B,cACb,IAAMtD,EAAWC,qBAAW1G,GACtB2G,EAAQD,qBAAWvG,GACnB0S,EAAWvL,uBAAY,WAC3Bb,EAAS,CAAEc,KXFc,gBWGzBuL,OAAOnS,aAAa+D,UACnB,IAEH,OACE,kBAACqO,GAAA,EAAD,CAAQC,OAAK,EAACzQ,UAAU,YACtB,kBAAC0Q,GAAA,EAAD,CAAa1Q,UAAU,uBAAvB,mBACGoE,EAAMkB,MAAM,CAAC,UAAW,gBAAmB,CAC5C,kBAACqL,GAAA,EAAD,CAAK3Q,UAAU,WACb,kBAAC,IAAD,CAASuK,GAAG,eAAeqG,OAAK,EAAC5Q,UAAU,iBAA3C,eAGA,kBAAC,IAAD,CAASuK,GAAG,UAAUqG,OAAK,EAAC5Q,UAAU,iBAAtC,WAIF,kBAAC2Q,GAAA,EAAD,KACE,kBAAC,eAAD,CACIjG,SACE,2EAEFmG,WAAW,SACXC,gBAAiBR,Q,sCCRzBS,GjB6EkB,SAACC,GACvB,IAAMC,EAAQ,GAOd,OANAlC,OAAOmC,KAAK/R,GAAKgS,SAAQ,SAACrE,GACxBiC,OAAOqC,eAAeH,EAAOnE,EAAK,CAChC9L,MAAOqQ,IAAUlS,EAAI2N,GAAU,IAAJkE,QAIxBC,EiBrFgBK,CAAS,GAE5BC,GAAkBF,KACtB,SAACG,EAAYC,GACXhE,EAAQ3O,IAAR,wBAA6B0S,IAAcnE,MAAK,YAA2B,IAAxB3O,EAAuB,EAAvBA,GAAIoC,EAAmB,EAAnBA,MAAOrC,EAAY,EAAZA,MAC5D,IAAKC,EACH,OAA0B,MAAtBD,EAAMwG,aACR7G,aAAa+D,aACboO,OAAOlM,QAAQqN,aAAa,CAAEvM,SAAS,GAAQ,KAAM,WAIhD,GAETsM,EAAS3Q,EAAMyB,KAAI,kBAAmB,CAAEvB,MAArB,EAAGW,GAA6ByG,MAAhC,EAAO1E,eAG9B,IACA,CACEiO,SAAS,EACTC,UAAU,IAIC,cACb,IAAM1N,EAAWC,qBAAW1G,GACtB4G,EAAUC,cAFG,EAGamF,cAAxBoI,oBAHW,MAGI,KAHJ,IAIStN,mBAAS,CAAEC,MAAM,EAAO/F,MAAO,OAJxC,mBAIZO,EAJY,KAIJyF,EAJI,OAKiBF,mBAAS,IAL1B,mBAKZgJ,EALY,KAKAuE,EALA,OAMOvN,mBAAS,IANhB,mBAMZwN,EANY,KAMLC,EANK,OAOiBzN,mBAAS,IAP1B,mBAOZ0N,EAPY,KAOAC,EAPA,KASbC,EAAepN,uBAAY,WAC/BV,EAAQa,QAAQ,kBACf,CAACb,IACE+N,EAA8BrN,sBAAW,uCAC7C,qCAAA7G,EAAA,yDAAmB8C,EAAnB,EAASqR,OAAUrR,MACjB8Q,EAAc,eACTvE,EADQ,CAEXP,KAAMhM,OAGFsR,EAAIvB,GAAiBrR,MAAjB,8BAA8CmS,GAAgB,CACtE7E,KAAMhM,KAPV,iCAUgCsR,EAVhC,mBAUY5T,EAVZ,EAUYA,GAAID,EAVhB,EAUgBA,MACPC,EAXT,oBAYgC,MAAtBD,EAAMwG,YAZhB,wBAaQ7G,aAAa+D,QACbkC,EAAQa,QAAQ,SAAU,CAAEC,SAAS,IAd7C,+DAD6C,sDAqB7C,CAACoI,IAGGgF,EAAoBxN,sBAAW,uCACnC,WAAOyN,EAAP,wBAAAtU,EAAA,yDACiB,kBADjB,EAAiBuU,OAAjB,wDAKEvO,EAAS,CAAEc,KADLA,EZ5E4B,0BY6EjBhG,OZzFO,YYoF1B,SAO8ByO,EAAQpO,KAAR,8BACHwS,EADG,UAE1B,CACEa,QAASF,EAAOxR,QAVtB,mBAOUtC,EAPV,EAOUA,GAAID,EAPd,EAOcA,MAOPC,EAdP,oBAe8B,MAAtBD,EAAMwG,YAfd,wBAgBM7G,aAAa+D,QACbkC,EAAQa,QAAQ,SAAU,CAAEC,SAAS,IAjB3C,oDAoBWjB,EAAS,CAAEc,OAAMhG,OZzGJ,QYyG0BP,WApBlD,QAuBEqT,EAAc,eACTvE,EADQ,CAEXzM,MAAM,CACJ,CAAEa,GAAI6Q,EAAOxR,MAAO0C,KAAM8O,EAAOpK,QAD9B,oBAECmF,EAAWzM,OAAS,QA3B9B,4CADmC,wDAgCnC,CAACyM,IAGGoF,EAAgB5N,sBAAW,uCAC/B,WAAOpB,GAAP,mBAAAzF,EAAA,sEAC8BuP,EAAQ9N,OAAR,8BACHkS,EADG,kBACmBlO,IAFjD,mBACUjF,EADV,EACUA,GAAID,EADd,EACcA,MAGPC,EAJP,oBAK8B,MAAtBD,EAAMwG,YALd,wBAMM7G,aAAa+D,QACbkC,EAAQa,QAAQ,SAAU,CAAEC,SAAS,IAP3C,6DAcE2M,EAAc,eAEPvE,EAFM,CAGTzM,MAAOyM,EAAWzM,MAAMsL,QAAO,qBAAGzK,KAAsBgC,OAE1D,CAAC4J,IAnBL,4CAD+B,sDAuB/B,CAACA,IAwBH,OArBAzH,qBAAU,WACRrB,EAAU,CAAED,MAAM,IAClB,sBAAC,kCAAAtG,EAAA,sEAC6CuP,EAAQ3O,IAAR,8BACnB+S,IAF1B,mBACSnT,EADT,EACSA,GAAID,EADb,EACaA,MAAmBmU,EADhC,EACoBrF,WAGd7O,EAJN,oBAK6B,MAAtBD,EAAMwG,YALb,wBAMK7G,aAAa+D,QACbkC,EAAQa,QAAQ,SAAU,CAAEC,SAAS,IAP1C,6DAcCV,EAAU,CAAED,MAAM,IAClBsN,EAAcc,GAff,2CAAD,KAiBC,CAACf,IAGF,kBAACjS,EAAA,EAAD,CAAOC,QAAQ,GACb,kBAACgO,EAAA,EAAD,CAAa3C,OAAQiH,GAArB,mBACA,kBAACpS,EAAA,EAAD,KACGf,EAAOwF,MAAQ,yBAAKxE,UAAU,sBAAf,eACdhB,EAAOwF,MACP,kBAACsJ,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,aACA,kBAACC,EAAA,EAAD,CACEjN,MAAOuM,EAAWP,KAClB6F,SAAUT,KAGd,kBAACrE,EAAA,EAAD,KACE,kBAAC,KAAD,CACE+E,YAAY,yBACZ9R,MAAO+Q,EACPgB,cAAe,SAAC/R,GAAD,OAAWgR,EAAShR,IACnC6R,SAAUN,EACVS,YAAazB,KAEf,kBAAC0B,GAAA,EAAD,CAAWC,OAAK,IACZ3F,EAAWzM,OAAS,IAAIuO,MAAM,EAAG4C,GAAY1P,KAAI,SAACsK,GAAD,OACjD,kBAACsG,GAAA,EAAD,CAAerG,IAAKD,EAAKlL,IACtBkL,EAAKnJ,KACN,kBAACyC,EAAA,EAAD,CACEwH,KAAK,KACLvH,MAAM,OACNpG,UAAU,cACV+F,QAAS,kBAAM4M,EAAc9F,EAAKlL,MAJpC,YAUH4L,EAAWzM,OAASmR,EAAa1E,EAAWzM,MAAMiB,QACjD,kBAACoR,GAAA,EAAD,KACE,kBAAChN,EAAA,EAAD,CACEC,MAAM,OACNqE,OAAK,EACL1E,QAAS,kBAAMmM,EAA2B,EAAbD,KAH/B,qBAcd,kBAAC/L,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAQJ,QAASoM,EAAc/L,MAAM,SAArC,YCzJOgN,OAlDf,WACmBjP,qBAAW1G,GAA5B,IACM2G,EAAQD,qBAAWvG,GAEzB,OACE,yBAAKoC,UAAU,OACb,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO4Q,OAAK,EAACyC,KAAK,UAChB,kBAACC,EAAD,OAEF,kBAAC,IAAD,CAAO1C,OAAK,EAACyC,KAAK,oBAChB,kBAACE,GAAD,MACA,kBAACC,EAAD,OAEF,kBAAC,IAAD,CAAO5C,OAAK,EAACyC,KAAK,SAChB,kBAACE,GAAD,MACA,kBAACC,EAAD,OAEF,kBAAC,IAAD,CAAO5C,OAAK,EAACyC,KAAK,WAChB,kBAACE,GAAD,MACA,kBAACE,GAAD,OAEF,kBAAC,IAAD,CACEJ,KAAK,eACLK,OAAQ,WACN,OAAKtP,EAAMkB,MAAM,CAAC,UAAW,eAK3B,oCACE,kBAACiO,GAAD,MACA,kBAACI,GAAD,MACA,kBAAC,IAAD,CAAON,KAAK,8BACV,kBAACO,GAAD,QARG,kBAAC,IAAD,CAAUrJ,GAAG,cAc1B,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAUA,GAAG,gBC/CL8B,QACW,cAA7BkE,OAAO1F,SAASgJ,UAEe,UAA7BtD,OAAO1F,SAASgJ,UAEhBtD,OAAO1F,SAASgJ,SAAS9U,MACvB,2D,sBCFO+U,GAAeC,aAAO,CACjC5J,QAAS,CACP6J,YAAY,GAEdC,YAAa,CACXtS,GAAI,KACJ3C,OflBkC,WeoBpC8M,YAAa,GACbnG,OAAQ,KAGK,YAACvB,EAAD,GAAyC,IAA/BY,EAA8B,EAA9BA,KAAMhG,EAAwB,EAAxBA,OAAWyT,EAAa,kCACrD,Gf5B0B,Ue4BtBzT,EACF,OAAIyT,EAAOhU,OAA0B,kBAAjBgU,EAAOhU,MAClB2F,EAAM8P,IACX,UACAH,aAAO,CACLC,YAAY,KAIX5P,EAET,GftC4B,YesCxBpF,EACF,OAAOoF,EAIT,OADA2G,QAAQC,IAAI,CAAEhG,OAAMyN,SAAQrO,MAAOA,EAAMgF,SACjCpE,GACN,IftCwB,aeuCtB,OAAOZ,EAAM8P,IACX,UACAH,aAAO,aACLC,YAAY,EACZG,kBAAmB1B,EAAO0B,mBACvB1B,EAAOtI,WAIhB,If/CyB,cegDvB,OAAO/F,EAAM8P,IACX,UACAH,aAAO,CACLC,YAAY,KAIlB,IfnDmC,wBeoDjC,OAAO5P,EACJ8P,IAAI,cAAeH,aAAOtB,EAAO3G,cACjCoI,IAAI,gBAAiBH,aAAOtB,EAAOnF,gBAExC,IftDoC,yBeuDlC,OAAOlJ,EAAMgQ,SAAS,CAAC,kBAAkB,SAACtI,GAAD,OACvCA,EAAYuI,QAAQN,aAAOtB,EAAOlF,gBAGtC,IfhEgC,qBeiE9B,OAAOnJ,EAAMkQ,MACX,CAAC,eACDP,aAAO,eACFtB,EAAO7P,QADN,CAEJI,SAAS,EACThE,Of3E4B,ce+ElC,IfzE4B,iBe0E1B,OAAOoF,EACJkQ,MAAM,CAAC,cAAe,QAASP,aAAOtB,EAAOjQ,OAC7C8R,MAAM,CAAC,cAAe,UAAW7B,EAAO5R,QACxCyT,MAAM,CAAC,cAAe,WAAY7B,EAAOzP,SAE9C,If9E8B,mBe+E5B,OAAOoB,EACJkQ,MAAM,CAAC,cAAe,UftFI,QeuF1BJ,IAAI,SAAUH,aAAOtB,EAAO9M,SAEjC,QACE,OAAOvB,ICrFPmQ,GAAQ,SAAClL,GAAW,IAAD,EACGmL,qBAAWC,GAASX,IADvB,mBAChB1P,EADgB,KACTF,EADS,KAGvB,OACE,kBAACzG,EAAgBiX,SAAjB,CAA0B1T,MAAOkD,GAC/B,kBAACtG,EAAa8W,SAAd,CAAuB1T,MAAOoD,GAC5B,kBAAC,GAAD,SAMRuQ,IAAStH,MAAK,WACZuH,IAASlB,OAAO,kBAAC,GAAD,MAAWmB,SAASC,eAAe,YF2G/C,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrB5H,MAAK,SAAC6H,GACLA,EAAaC,gBAEd3W,OAAM,SAACC,GACNsM,QAAQtM,MAAMA,EAAM2W,a","file":"static/js/main.9d6e7dbe.chunk.js","sourcesContent":["import React from 'react';\n\nexport const DispatchContext = React.createContext();\nexport const StateContext = React.createContext();\n","import { default as _debounce } from 'lodash.debounce';\n\nconst BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:3000';\nconst prefix = 'wg'; // wordgame\n\n/**\n *\n * @param url\n * @param method\n * @param body\n * @returns {Promise<Response|{ ok: boolean }>}\n */\nconst request = async (url, method, body = null) => {\n  const token = localStorage.getItem(`${prefix}:token`);\n  const headers = {\n    'Content-Type': 'application/json',\n  };\n\n  if (token) {\n    // headers['Authorization'] = `Bearer ${token}`;\n  }\n  // Normalize reponse to { ok, error }\n  return fetch(\n    url,\n    method === 'GET' || method === 'DELETE'\n      ? { headers, method }\n      : {\n          headers,\n          method,\n          body,\n        }\n  ).catch((error) => {\n    return {\n      ok: false,\n      error,\n    };\n  });\n};\n\nconst handleResponse = async (res) => {\n  if (!res) {\n    return { ok: false };\n  }\n\n  try {\n    const contentType = res.headers.get('content-type');\n    if (contentType && contentType.match(/json/)) {\n      if (res.status >= 400) {\n        return {\n          ok: false,\n          error: await res.json(),\n        };\n      }\n\n      return res.json();\n    } else {\n      return {\n        ok: false,\n        error: await res.text(),\n      };\n    }\n  } catch (error) {\n    return { ok: false, error };\n  }\n};\n\nconst api = {\n  request,\n  async get(uri) {\n    const res = await request(`${BASE_URL}${uri}`, 'GET');\n    return handleResponse(res);\n  },\n  async post(uri, payload) {\n    const res = await request(\n      `${BASE_URL}${uri}`,\n      'POST',\n      JSON.stringify(payload)\n    );\n    return handleResponse(res);\n  },\n  async put(uri, payload) {\n    const res = await request(\n      `${BASE_URL}${uri}`,\n      'PUT',\n      JSON.stringify(payload)\n    );\n    return handleResponse(res);\n  },\n  async patch(uri, payload) {\n    const res = await request(\n      `${BASE_URL}${uri}`,\n      'PATCH',\n      JSON.stringify(payload)\n    );\n    return handleResponse(res);\n  },\n  async delete(uri) {\n    const res = await request(`${BASE_URL}${uri}`, 'DELETE');\n    return handleResponse(res);\n  },\n};\n\nexport const debounce = (s) => {\n  const proxy = {};\n  Object.keys(api).forEach((key) => {\n    Object.defineProperty(proxy, key, {\n      value: _debounce(api[key], s * 1000),\n    });\n  });\n\n  return proxy;\n};\n\nexport default api;\n","import React from 'react';\nimport { Modal, ModalBody } from 'reactstrap';\n\nexport default () => (\n  <Modal isOpen={true} contentClassName=\"bg-transparent border-0\">\n    <ModalBody>\n      <div className=\"loader\">Loading...</div>\n    </ModalBody>\n  </Modal>\n);\n","import {openDB} from 'idb';\n\nconst DB_NAME = 'WordGame';\nexport const TBL_SESSIONS = 'sessions';\nexport const TBL_TERMS = 'terms';\n\nlet db = null;\n\nexport const init = async () => {\n    db = await openDB(DB_NAME, 4, {\n        upgrade(db) {\n            db.createObjectStore(TBL_SESSIONS, {\n                keyPath: 'id',\n            });\n            db.createObjectStore(TBL_TERMS, {\n                keyPath: 'id',\n            }).createIndex('index', 'index');\n        },\n    });\n};\n\nexport const getDb = async () => {\n    if (db) {\n        return db;\n    }\n\n    await init();\n    return db;\n}\n","import {getDb} from './indexeddb';\n\nconst TBL_SESSIONS = 'sessions';\nconst TBL_TERMS = 'terms';\n\nexport const renewSession = async () => {\n  const db = await getDb();\n  let cursor = await db.transaction(TBL_TERMS, 'read').store.openCursor();\n  const terms = [];\n\n  while (cursor) {\n    terms.push(cursor.value);\n    cursor = await cursor.continue();\n  }\n\n  return createSession(terms);\n};\n\nexport const createSession = async (terms) => {\n  const db = await getDb();\n  const txSession = db.transaction(TBL_SESSIONS, 'readwrite');\n  const sessionId = Date.now().toString();\n  await Promise.all([\n    txSession.store.add({\n      id: sessionId,\n      corrects: 0,\n      wrongs: 0,\n      count: terms.length,\n      nextWordIndex: 0,\n    }),\n    txSession.done,\n  ]);\n\n  const tx = db.transaction(TBL_TERMS, 'readwrite');\n  await tx.store.clear();\n  await Promise.all(\n    terms\n      .sort(() => Math.random() - 0.5)\n      .map((term, index) => {\n        return tx.store.add({\n          ...term,\n          index,\n        });\n      })\n  );\n\n  await tx.done;\n\n  return sessionId;\n};\n\nexport const getSession = async (sessionId) => {\n  const db = await getDb();\n  const store = db.transaction(TBL_SESSIONS).objectStore(TBL_SESSIONS);\n  const session = await store.get(sessionId);\n\n  return session;\n};\n\nexport const getNextTerm = async (sessionId) => {\n  const db = await getDb();\n  const storeSession = db\n    .transaction(TBL_SESSIONS, 'readwrite')\n    .objectStore(TBL_SESSIONS);\n  const session = await storeSession.get(sessionId);\n  const { nextWordIndex, count } = session;\n  if (nextWordIndex === -1) {\n    return null;\n  }\n  await storeSession.put({\n    ...session,\n    nextWordIndex: nextWordIndex + 1 < count ? nextWordIndex + 1 : -1,\n  });\n\n  const term = await db.getFromIndex(TBL_TERMS, 'index', nextWordIndex);\n\n  return {\n    term,\n    hasNext: nextWordIndex + 1 < count,\n  };\n};\n\nexport const updateStats = async (sessionId, entry) => {\n  const db = await getDb();\n  const tx = db.transaction(TBL_SESSIONS, 'readwrite');\n  const storeSession = tx.objectStore(TBL_SESSIONS);\n  const session = await storeSession.get(sessionId);\n  await storeSession.put({\n    ...session,\n    corrects: session.corrects + entry.correct,\n    wrongs: session.wrongs + !entry.correct,\n    stats: (session.stats || []).concat(entry),\n  });\n  await tx.done;\n\n  return {\n    ok: true,\n  };\n};\n\nexport const getSessionStats = async (sessionId) => {\n  const terms = [];\n  const db = await getDb();\n  let cursor = await db.transaction(TBL_TERMS).store.openCursor();\n\n  while (cursor) {\n    terms.push(cursor.value);\n    cursor = await cursor.continue();\n  }\n\n  const session = await db.get(TBL_SESSIONS, sessionId);\n\n  const stats = (session.stats || []).reduce(\n    (acc, entry) => {\n      const term = terms.find(({ word: key }) => key === entry.termId);\n      const gender = term.tags.includes('MAS')\n        ? 'der'\n        : term.tags.includes('FEM')\n        ? 'die'\n        : term.tags.includes('NEU')\n        ? 'das'\n        : null;\n      if (!gender) {\n        return acc;\n      }\n\n      if (entry.correct) {\n        acc[gender].corrects += 1;\n      } else {\n        acc[gender].wrongs += 1;\n      }\n\n      return acc;\n    },\n    {\n      der: { corrects: 0, wrongs: 0 },\n      die: { corrects: 0, wrongs: 0 },\n      das: { corrects: 0, wrongs: 0 },\n    }\n  );\n\n  return stats;\n};\n","import React, { useCallback, useContext, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  Button,\n  Modal,\n  ModalBody,\n  ModalFooter,\n} from 'reactstrap';\nimport { DispatchContext, StateContext } from '../components/context';\nimport {\n  ACTION_NEXT_WORD,\n  ACTION_SHOW_REPORT,\n  STATUS_ERROR,\n  STATUS_OK,\n  STATUS_PENDING,\n} from '../components/constants';\nimport Loader from './Loader';\nimport { getNextTerm, getSessionStats, updateStats } from './session';\n\nexport default ({ sessionId }) => {\n  const dispatch = useContext(DispatchContext);\n  const state = useContext(StateContext);\n  const history = useHistory();\n\n  const [status, setStatus] = useState({ busy: false, error: null });\n  const [showingAnswer, setShowingAnswer] = useState(null);\n\n  const [timestamp, setTimestamp] = useState(null);\n\n  const fetchNextWord = useCallback(async () => {\n    dispatch({ type: ACTION_NEXT_WORD, status: STATUS_PENDING });\n    const { term, hasNext, error } = await getNextTerm(sessionId);\n\n    if (!term) {\n      if (error.status_code === 401) {\n        localStorage.clear();\n        history.replace('/login', { expired: true });\n        return;\n      }\n\n      dispatch({ type: ACTION_NEXT_WORD, status: STATUS_ERROR, error });\n      return;\n    }\n    dispatch({ type: ACTION_NEXT_WORD, status: STATUS_OK, term, hasNext });\n    setTimestamp(Date.now() / 1000);\n  }, [dispatch, state, sessionId]);\n\n  const onSelectAnswer = useCallback(\n    async (answer) => {\n      const termId = state.getIn(['gameSession', 'term', 'id']);\n      const wordTags = state.getIn(['gameSession', 'term', 'tags']);\n      const correct = wordTags.includes(answer);\n\n      const { ok, error } = await updateStats(sessionId, {\n        termId,\n        correct,\n        seconds: Date.now() / 1000 - timestamp,\n      });\n      if (!ok) {\n        if (error.status_code === 401) {\n          localStorage.clear();\n          history.replace('/login', { expired: true });\n          return;\n        }\n        return;\n      }\n\n      if (!correct) {\n        setShowingAnswer({\n          correct,\n          article: wordTags.includes('MAS')\n            ? 'der'\n            : wordTags.includes('FEM')\n            ? 'die'\n            : 'das',\n        });\n      } else {\n        if (state.getIn(['gameSession', 'hasNext'])) {\n          await fetchNextWord();\n        } else {\n          showReport();\n        }\n      }\n    },\n    [dispatch, timestamp, state.getIn(['gameSession', 'term'])]\n  );\n\n  const showReport = useCallback(async () => {\n    setStatus({ busy: true });\n\n    const sessionId = state.getIn(['gameSession', 'id']);\n\n    dispatch({ type: ACTION_SHOW_REPORT, status: STATUS_PENDING, sessionId });\n    const stats = await getSessionStats(sessionId);\n\n    dispatch({\n      type: ACTION_SHOW_REPORT,\n      status: STATUS_OK,\n      report: { session: stats },\n    });\n  }, [dispatch, state.getIn(['gameSession', 'term'])]);\n\n  const onSkipClick = useCallback(async () => {\n    await fetchNextWord();\n  }, [dispatch, state.getIn(['gameSession', 'term'])]);\n\n  const onNextClick = useCallback(async () => {\n    setShowingAnswer(null);\n    if (state.getIn(['gameSession', 'hasNext'])) {\n      await fetchNextWord();\n    } else {\n      showReport();\n    }\n  }, [\n    dispatch,\n    state.getIn(['gameSession', 'term']),\n    state.getIn(['gameSession', 'hasNext']),\n  ]);\n\n  useEffect(() => {\n    (async () => {\n      await fetchNextWord();\n    })();\n  }, []);\n\n  const term = state.getIn(['gameSession', 'term']);\n\n  return (\n    <section className=\"row\">\n      <div className=\"col\">\n        <h2 className=\"text-center text-black-50\">Play</h2>\n        {!term && <p className=\"text-center\">Loading...</p>}\n        {!!term && (\n          <>\n            <div className=\"term mt-5 mb-5\">\n              <div className=\"text-center display-2 text-break\">\n                {term.get('word')}\n              </div>\n              <button className=\"btn btn-sm btn-link\">Meaning >></button>\n            </div>\n\n            <div className=\"actions text-center\">\n              <div className=\"btn-group w-75\">\n                <button\n                  className=\"btn btn-light btn-lg text-white btn-circle bg-masculine\"\n                  onClick={() => onSelectAnswer('MAS')}\n                >\n                  Der\n                </button>\n                <button\n                  className=\"btn btn-light btn-lg text-white btn-circle bg-feminine\"\n                  onClick={() => onSelectAnswer('FEM')}\n                >\n                  Die\n                </button>\n                <button\n                  className=\"btn btn-light btn-lg text-white btn-circle bg-neuter\"\n                  onClick={() => onSelectAnswer('NEU')}\n                >\n                  Das\n                </button>\n              </div>\n              <div className=\"btn-group w-100 mt-5\">\n                <button\n                  className=\"btn btn-primary btn-sm\"\n                  onClick={onSkipClick}\n                >\n                  Skip\n                </button>\n              </div>\n              <div className=\"text-center mt-5\">\n                <button className=\"btn btn-light\" onClick={showReport}>\n                  I'm done for now\n                </button>\n              </div>\n            </div>\n          </>\n        )}\n      </div>\n      {!!showingAnswer && (\n        <Modal isOpen={true}>\n          <ModalBody>\n            <div\n              className=\"display-2 text-center\"\n              style={{ wordBreak: 'break-word' }}\n            >\n              <span className=\"font-weight-lighter text-muted\">\n                {term.get('word')}\n              </span>\n              , <br />\n              <span className=\"font-weight-bold\">{showingAnswer.article}</span>\n            </div>\n          </ModalBody>\n          <ModalFooter>\n            <Button color=\"success\" onClick={onNextClick} className=\"mx-auto\">\n              Next\n            </Button>\n          </ModalFooter>\n        </Modal>\n      )}\n      {!!status.busy && <Loader />}\n    </section>\n  );\n};\n","export const STATUS_OK = 'ok';\nexport const STATUS_ERROR = 'error';\nexport const STATUS_PENDING = 'pending';\n\nexport const SESSION_STATUS_PENDING = 'pending';\nexport const SESSION_STATUS_PLAYING = 'playing';\nexport const SESSION_STATUS_DONE = 'done';\n\nexport const ACTION_LOGIN = 'user/login';\nexport const ACTION_LOGOUT = 'user/logout';\nexport const ACTION_START_SESSION = 'user/start-session';\nexport const ACTION_NEXT_WORD = 'user/next-term';\nexport const ACTION_SHOW_REPORT = 'user/show-report';\nexport const ACTION_LIST_COLLECTIONS = 'user/list-collections';\nexport const ACTION_ADD_TO_COLLECTION = 'user/add-to-collections';\nexport const ACTION_CREATE_COLLECTION = 'user/create-collection';\n","import React from 'react';\nimport { Line } from 'react-chartjs-2';\n\nconst defaultLineDataSeriesOptions = {\n  fill: false,\n  lineTension: 0.1,\n  backgroundColor: 'rgba(63,69,192,0.4)',\n  borderColor: 'rgb(65,121,192)',\n  borderCapStyle: 'butt',\n  borderDash: [],\n  borderDashOffset: 0.0,\n  borderJoinStyle: 'miter',\n  pointBorderColor: 'rgba(75,192,192,1)',\n  pointBackgroundColor: '#fff',\n  pointBorderWidth: 1,\n  pointHoverRadius: 5,\n  pointHoverBackgroundColor: 'rgba(75,192,192,1)',\n  pointHoverBorderColor: 'rgba(220,220,220,1)',\n  pointHoverBorderWidth: 2,\n  pointRadius: 1,\n  pointHitRadius: 10,\n};\n\nconst formatDate = (date) => `${date.getMonth() + 1}.${date.getDate()}`;\n\nexport default ({ weeklyPerformance }) => {\n  const labels = weeklyPerformance.map(({ week }) =>\n    formatDate(new Date(week * 7 * 86400 * 1000))\n  );\n  const confidence = weeklyPerformance.map(({ confidence_factor }) =>\n    (confidence_factor * 100).toFixed(2)\n  );\n  const correct = weeklyPerformance.map(({ correct_factor }) =>\n    (correct_factor * 100).toFixed(2)\n  );\n\n  return (\n    <Line\n      data={{\n        labels,\n        datasets: [\n          {\n            label: 'Correct',\n            data: correct,\n            ...defaultLineDataSeriesOptions,\n          },\n          {\n            label: 'Confidence',\n            data: confidence,\n            ...defaultLineDataSeriesOptions,\n            backgroundColor: '#C0122A',\n            borderColor: '#f3132c',\n          },\n        ],\n      }}\n      width={100}\n      height={40}\n      options={{\n        scales: {\n          yAxes: [{ ticks: { max: 100, min: 0, stepSize: 20 } }],\n        },\n        maintainAspectRatio: true,\n        layout: {\n          padding: 0,\n        },\n      }}\n    />\n  );\n};\n","import React, { useContext } from 'react';\nimport { StateContext } from './context';\nimport LineChartWeeklyPerformance from './LineChartWeeklyPerformance';\n\n/**\n * Post-session report\n * @returns {*}\n */\nexport default () => {\n  const state = useContext(StateContext);\n\n  const session = state.getIn(['report', 'session']);\n  const weeklyPerformance = state.getIn(['report', 'weekly_performance']);\n\n  const sessionRatios = {\n    der:\n      session.getIn(['der', 'corrects']) /\n      (session.getIn(['der', 'corrects']) + session.getIn(['der', 'wrongs'])),\n    die:\n      session.getIn(['die', 'corrects']) /\n      (session.getIn(['die', 'corrects']) + session.getIn(['die', 'wrongs'])),\n    das:\n      session.getIn(['das', 'corrects']) /\n      (session.getIn(['das', 'corrects']) + session.getIn(['das', 'wrongs'])),\n  };\n\n  return (\n    <section className=\"row\">\n      <div className=\"col\">\n        <h2>Report</h2>\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <h3>Session Report</h3>\n          </div>\n          <div className=\"card-body\">\n            <div className=\"progress-group\">\n              <div className=\"progress-label\">DER</div>\n              <div className=\"progress mr-0\">\n                <div\n                  className=\"progress-bar bg-masculine\"\n                  role=\"progressbar\"\n                  style={{\n                    width: `${sessionRatios.der * 100}%`,\n                  }}\n                />\n              </div>\n            </div>\n            <div className=\"progress-group\">\n              <div className=\"progress-label\">DIE</div>\n              <div className=\"progress mr-0\">\n                <div\n                  className=\"progress-bar bg-feminine\"\n                  role=\"progressbar\"\n                  style={{\n                    width: `${sessionRatios.die * 100}%`,\n                  }}\n                />\n              </div>\n            </div>\n            <div className=\"progress-group\">\n              <div className=\"progress-label\">DAS</div>\n              <div className=\"progress mr-0\">\n                <div\n                  className=\"progress-bar bg-neuter\"\n                  role=\"progressbar\"\n                  style={{\n                    width: `${sessionRatios.das * 100}%`,\n                  }}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        {!!weeklyPerformance && (\n          <div className=\"card mt-4\">\n            <div className=\"card-header\">\n              <h3 className=\"mb-0\">Weekly Report</h3>\n            </div>\n            <div className=\"card-body\">\n              <LineChartWeeklyPerformance\n                weeklyPerformance={weeklyPerformance.toJS()}\n              />\n            </div>\n          </div>\n        )}\n      </div>\n    </section>\n  );\n};\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport { Link, useHistory, useParams } from \"react-router-dom\";\nimport { DispatchContext, StateContext } from \"../components/context\";\nimport network from \"../components/network\";\nimport {\n  ACTION_LOGIN,\n  ACTION_START_SESSION,\n  SESSION_STATUS_DONE,\n  SESSION_STATUS_PLAYING,\n  STATUS_ERROR,\n  STATUS_OK,\n  STATUS_PENDING,\n} from \"../components/constants\";\nimport Stage from \"../components/Stage\";\nimport Report from \"../components/Report\";\nimport GoogleLogin from \"react-google-login\";\nimport { Button } from \"reactstrap\";\nimport { load } from \"recaptcha-v3\";\nimport {createSession, getSession, renewSession} from \"../components/session\";\n\nconst CAPTCHA_CLIENT_KEY = \"6LfUb-EUAAAAAEBdxIpMqGCi2e7ScZ4I4eqVhzAh\";\n\nexport default (props) => {\n  const dispatch = useContext(DispatchContext);\n  const state = useContext(StateContext);\n  const [recaptcha, setRecaptcha] = useState(null);\n  const history = useHistory();\n  const pathParams = useParams();\n\n  const onStartSession = useCallback(async () => {\n    // const recaptchaToken = await recaptcha.execute(\"start_session\");\n    const sessionId = await renewSession();\n\n    history.replace(`/play/${sessionId}`);\n  }, [recaptcha]);\n\n  useEffect(() => {\n    (async () => {\n      const _recaptcha = await load(CAPTCHA_CLIENT_KEY);\n      setRecaptcha(_recaptcha);\n    })();\n  });\n\n  useEffect(() => {\n    (async () => {\n      if (pathParams.sessionId) {\n        const session = await getSession(pathParams.sessionId);\n        dispatch({ type: ACTION_START_SESSION, status: STATUS_OK, session });\n      } else {\n        if (localStorage.getItem('wg:token')) {\n          history.replace(\"/collections\");\n        } else {\n          history.replace(\"/login\");\n        }\n      }\n    })();\n  }, [dispatch, pathParams.sessionId]);\n\n  const onSuccess = useCallback(\n    async (response) => {\n      const { accessToken: token, profileObj } = response;\n\n      localStorage.setItem(\"wg:profileObj\", profileObj);\n      localStorage.setItem(\"wg:token\", token);\n      dispatch({\n        type: ACTION_LOGIN,\n        status: STATUS_OK,\n        token,\n        profile: profileObj,\n      });\n      history.replace(\"/collections\");\n    },\n    [dispatch, history]\n  );\n\n  const session = state.getIn([\"gameSession\"]);\n\n  return (\n    <div className=\"container play-page\">\n      {!(session && session.get(\"id\")) && (\n        <section className=\"row\">\n          <div className=\"col\">\n            <div\n              className=\"btn btn-primary btn-lg w-100\"\n              style={{ marginTop: \"75%\" }}\n            >\n              START\n            </div>\n          </div>\n        </section>\n      )}\n      {!!(\n        session &&\n        session.get(\"id\") &&\n        session.get(\"status\") === SESSION_STATUS_PLAYING\n      ) && <Stage sessionId={session.get(\"id\")} />}\n      {!!(\n        session &&\n        session.get(\"id\") &&\n        session.get(\"status\") === SESSION_STATUS_DONE\n      ) && <Report sessionId={session.get(\"id\")} />}\n      {!!(\n        session &&\n        session.get(\"id\") &&\n        session.get(\"status\") === SESSION_STATUS_DONE\n      ) && (\n        <section className=\"row\">\n          <div className=\"col\">\n            {state.getIn([\"profile\", \"isLoggedIn\"]) && (\n              <Link className=\"btn btn-sm btn-link btn-block\" to=\"/collections\">\n                Back to collections\n              </Link>\n            )}\n            {!state.getIn([\"profile\", \"isLoggedIn\"]) && (\n              <>\n                <div className=\"row mt-2 justify-content-center\">\n                  <div className=\"col-6\">\n                    <Button\n                      disabled={!recaptcha}\n                      color=\"primary\"\n                      block\n                      onClick={onStartSession}\n                    >\n                      TRY AGAIN!\n                    </Button>\n                  </div>\n                </div>\n\n                <GoogleLogin\n                  clientId={\n                    \"976856176051-ietkcknpua13udt2tucm8sbecik7h5rt.apps.googleusercontent.com\"\n                  }\n                  onSuccess={onSuccess}\n                  responseType={\"code\"}\n                  className=\"mt-5\"\n                />\n                <p className=\"text-muted\">...to keep track of your progress</p>\n              </>\n            )}\n          </div>\n        </section>\n      )}\n    </div>\n  );\n};\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport GoogleLogin from \"react-google-login\";\nimport { load } from \"recaptcha-v3\";\nimport { useHistory, useLocation, useParams } from \"react-router-dom\";\nimport { Alert, Button } from \"reactstrap\";\nimport { DispatchContext } from \"../components/context\";\nimport { ACTION_LOGIN, STATUS_OK } from \"../components/constants\";\nimport network from \"../components/network\";\nimport {createSession} from \"../components/session\";\n\nconst CAPTCHA_CLIENT_KEY = \"6LfUb-EUAAAAAEBdxIpMqGCi2e7ScZ4I4eqVhzAh\";\n\nexport default () => {\n  const [recaptcha, setRecaptcha] = useState(null);\n  const dispatch = useContext(DispatchContext);\n  const history = useHistory();\n  const params = useParams();\n  const location = useLocation();\n\n  const onSuccess = useCallback(\n    async (response) => {\n      const { accessToken: token, profileObj } = response;\n\n      localStorage.setItem(\"wg:profile\", JSON.stringify(profileObj));\n      localStorage.setItem(\"wg:token\", token);\n      dispatch({\n        type: ACTION_LOGIN,\n        status: STATUS_OK,\n        token,\n      });\n      history.replace(\"/collections\");\n    },\n    [dispatch, history]\n  );\n  const onStartSession = useCallback(async () => {\n    // const recaptchaToken = await recaptcha.execute(\"start_session\");\n    const sessionId = await createSession([]);\n    history.replace(`/play/${sessionId}`);\n  }, [recaptcha]);\n\n  useEffect(() => {\n    console.log(params);\n    (async () => {\n      const _recaptcha = await load(CAPTCHA_CLIENT_KEY);\n      setRecaptcha(_recaptcha);\n    })();\n  });\n\n  return (\n    <div className=\"container login-page\">\n      {!!(location.state && location.state.expired) && (\n        <Alert\n          className=\"mt-2 alert-float\"\n          isOpen={true}\n          color=\"warning\"\n          toggle={() => history.replace(\"/login\")}\n        >\n          <h4 className=\"alert-heading\">Your session has expired.</h4>\n          <p className=\"mt-3 text-center text-sm-left\">\n            Without logging in, your session lasts for only for 10 minutes.\n          </p>\n        </Alert>\n      )}\n      <section className=\"row\">\n        <div className=\"col\">\n          <h3\n            style={{\n              marginTop: \"50%\",\n            }}\n          >\n            Hallo Deutsch\n          </h3>\n          <GoogleLogin\n            clientId={\n              \"976856176051-ietkcknpua13udt2tucm8sbecik7h5rt.apps.googleusercontent.com\"\n            }\n            onSuccess={onSuccess}\n            responseType={\"token\"}\n            isSignedIn={true}\n          />\n          <p className=\"text-muted\">\n            ...to coup with the insane irregularity in the German language.\n          </p>\n        </div>\n      </section>\n      <div className=\"row justify-content-center\">\n        <div className=\"col-6\">\n          <Button\n            disabled={!recaptcha}\n            color=\"primary\"\n            block\n            onClick={onStartSession}\n          >\n            TRY NOW!\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import api from './network';\n\nasync function content(url, parse) {\n  const res = await api.request(url, 'GET');\n  if (!res.ok) {\n    throw new Error('Bad Request');\n  }\n\n  const data = await res.json();\n  if (data.encoding !== 'base64') {\n    throw new Error('Bad Request');\n  }\n\n  const escaped = decodeURIComponent(escape(atob(data.content)));\n  const parsed = parse(escaped);\n  return parsed;\n}\n\nexport const getCollections = async () => {\n  const url =\n    'https://api.github.com/repos/khanhhua/wordgame-data/contents/menschen/package.json';\n  try {\n    const json = await content(url, JSON.parse);\n    return json.collections;\n  } catch (e) {\n    return [];\n  }\n};\n\nexport const getTermsByCollection = async ({ file }, flag = null) => {\n  const url = `https://api.github.com/repos/khanhhua/wordgame-data/contents/menschen/${file}`;\n  try {\n    const words = await content(url, (decoded) => {\n      return decoded\n        .split('\\n')\n        .filter(Boolean)\n        .map((line) => {\n          const parts = line.split(';');\n          return {\n            id: parts[0],\n            word: parts[0],\n            meaning: parts[1],\n            tags: parts[2],\n          };\n        })\n        .filter((term) => {\n          switch (flag) {\n            default:\n              return true;\n            case 'noun': {\n              const { tags } = term;\n              return (\n                tags.includes('MAS') ||\n                tags.includes('FEM') ||\n                tags.includes('NEU')\n              );\n            }\n          }\n        });\n    });\n    console.log({ words });\n    return words;\n  } catch (e) {\n    return [];\n  }\n};\n","import React from 'react';\n\nexport default ({ collections, onReviewClick, onEditClick }) => {\n  const editable = typeof onEditClick === 'function';\n\n  return (\n    <div className=\"list-group list-group-flush\">\n      {collections.map((item) => (\n        <div key={item.get('id')} className=\"list-group-item px-1\">\n          {item.get('name')}\n          <div className=\"actions float-right\">\n            <div className=\"btn-group btn-group-sm\">\n              {editable && (\n                <button\n                  className=\"btn btn-sm btn-light\"\n                  onClick={() => onEditClick(item)}\n                >\n                  Edit\n                </button>\n              )}\n              <button\n                className=\"btn btn-sm btn-primary\"\n                onClick={() => onReviewClick(item)}\n              >\n                Review\n              </button>\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n","import React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport {\n  Button,\n  Form,\n  FormGroup,\n  Input,\n  Label,\n  Modal,\n  ModalBody,\n  ModalFooter,\n  ModalHeader,\n} from \"reactstrap\";\nimport network from \"../components/network\";\nimport { getCollections, getTermsByCollection } from \"../components/github\";\nimport { createSession } from \"../components/session\";\nimport { DispatchContext, StateContext } from \"../components/context\";\nimport {\n  ACTION_CREATE_COLLECTION,\n  ACTION_LIST_COLLECTIONS,\n  ACTION_START_SESSION,\n  STATUS_ERROR,\n  STATUS_OK,\n  STATUS_PENDING,\n} from \"../components/constants\";\nimport CollectionList from \"../components/CollectionList\";\n\nexport default (props) => {\n  const dispatch = useContext(DispatchContext);\n  const state = useContext(StateContext);\n  const [newCollection, setNewCollection] = useState({\n    visible: false,\n    name: \"\",\n  });\n  const newCollectionNameRef = useRef();\n  const history = useHistory();\n\n  useEffect(() => {\n    (async () => {\n      const {\n        ok,\n        collections,\n        myCollections,\n        error,\n      } = await getCollections().then((collections) => ({\n        collections,\n        myCollections: [],\n        ok: true,\n        error: null,\n      }));\n\n      if (!ok) {\n        if (error.status_code === 401) {\n          localStorage.clear();\n          history.replace(\"/login\", { expired: true });\n          return;\n        }\n\n        dispatch({\n          type: ACTION_LIST_COLLECTIONS,\n          status: STATUS_ERROR,\n          error,\n        });\n        return;\n      }\n\n      dispatch({\n        type: ACTION_LIST_COLLECTIONS,\n        status: STATUS_OK,\n        collections,\n        myCollections,\n      });\n    })();\n  }, [dispatch]);\n\n  const onReviewClick = async (collection) => {\n    dispatch({ type: ACTION_START_SESSION, status: STATUS_PENDING });\n    const terms = await getTermsByCollection({ file: collection.get(\"file\") }, 'noun');\n    const sessionId = await createSession(terms);\n\n    history.push(`/play/${sessionId}`);\n  };\n\n  const onNewCollectionCreate = useCallback(async () => {\n    const type = ACTION_CREATE_COLLECTION;\n    dispatch({ type, status: STATUS_PENDING });\n    const { ok, collection, error } = await network.post(\n      \"/api/me/collections\",\n      {\n        name: newCollectionNameRef.current.value,\n      }\n    );\n    if (!ok) {\n      if (error.status_code === 401) {\n        localStorage.clear();\n        history.replace(\"/login\", { expired: true });\n        return;\n      }\n\n      return dispatch({ type, status: STATUS_ERROR, error });\n    }\n\n    dispatch({ type, status: STATUS_OK, collection });\n    setNewCollection({ visible: false });\n  }, [dispatch, newCollectionNameRef]);\n\n  const onEditClick = useCallback(\n    async (collection) => {\n      history.push(`/collections/${collection.get(\"id\")}`);\n    },\n    [history]\n  );\n\n  const collections = state.get(\"collections\");\n  const myCollections = state.get(\"myCollections\");\n\n  return (\n    <div className=\"container my-collection-list-page\">\n      <section className=\"row\">\n        <div className=\"col\">\n          {!!(myCollections && myCollections.size) && (\n            <>\n              <div className=\"w-100\">\n                <button\n                  onClick={() => setNewCollection({ visible: true })}\n                  className=\"btn btn-sm btn-light mt-2 float-right\"\n                >\n                  Add\n                </button>\n                <h2>My Learning List</h2>\n              </div>\n              <CollectionList\n                onEditClick={onEditClick}\n                collections={myCollections}\n                onReviewClick={onReviewClick}\n              />\n            </>\n          )}\n          {!(collections && collections.size) && (\n            <p className=\"text-center\">Loading...</p>\n          )}\n          {!!(collections && collections.size) && (\n            <>\n              <h2 className=\"mt-5\">Collections</h2>\n              <CollectionList\n                collections={collections}\n                onReviewClick={onReviewClick}\n              />\n            </>\n          )}\n        </div>\n      </section>\n      {!!newCollection.visible && (\n        <Modal isOpen={newCollection.visible}>\n          <ModalHeader toggle={() => setNewCollection({ visible: false })}>\n            New Collection\n          </ModalHeader>\n          <ModalBody>\n            <Form>\n              <FormGroup>\n                <Label>Name</Label>\n                <Input innerRef={newCollectionNameRef} />\n              </FormGroup>\n            </Form>\n          </ModalBody>\n          <ModalFooter>\n            <Button onClick={onNewCollectionCreate} color=\"primary\">\n              Create\n            </Button>\n          </ModalFooter>\n        </Modal>\n      )}\n    </div>\n  );\n};\n","import React from 'react';\nimport { Bar } from 'react-chartjs-2';\n\nconst defaultLineDataSeriesOptions = {\n  backgroundColor: 'rgba(63,69,192,0.4)',\n  borderColor: 'rgb(65,121,192)',\n  borderWidth: 1,\n  hoverBackgroundColor: 'rgba(63,69,192,0.4)',\n  hoverBorderColor: 'rgb(65,121,192)',\n};\n\nexport default ({ histogram }) => {\n  return (\n    <Bar\n      width={100}\n      height={50}\n      data={{\n        labels: histogram.map(({ seconds }) => seconds),\n        datasets: [\n          {\n            label: 'Correct Response Time (s)',\n            data: histogram.map(({ correct_count }) => correct_count),\n            ...defaultLineDataSeriesOptions,\n          },\n          {\n            label: 'Incorrect Response Time (s)',\n            data: histogram.map(({ wrong_count }) => wrong_count),\n            ...defaultLineDataSeriesOptions,\n            backgroundColor: 'rgba(192,83,102,0.4)',\n            borderColor: 'rgb(192,73,90)',\n          },\n        ],\n      }}\n      options={{\n        scales: {\n          yAxes: [{ ticks: { min: 0 } }],\n          xAxes: [\n            {\n              distribution: 'series',\n            },\n          ],\n        },\n      }}\n    />\n  );\n};\n","import {getDb, TBL_SESSIONS} from './indexeddb';\n\nexport const getLocalReports = async ({weekly, worst, histogram}) => {\n    let stats = [];\n    const db = await getDb();\n    let cursor = await db.transaction(TBL_SESSIONS).store.openCursor();\n    while (cursor) {\n        if (cursor.value.stats) {\n            stats = stats.concat(cursor.value.stats);\n        }\n        cursor = await cursor.continue();\n    }\n\n    const worstPerformers = Object.entries(stats.reduce((acc, { termId, correct, seconds }) => {\n        const key = termId;\n        if (!(key in acc)) {\n            acc[key] = { correct_count: 0, seconds_correct: 0, total_count: 0, total_seconds: 0 };\n        }\n        const entry = acc[key];\n\n        if (correct) {\n            entry.correct_count += 1\n            entry.seconds_correct += seconds;\n        }\n        entry.total_count += 1;\n        entry.total_seconds += seconds;\n\n       return acc;\n    }, {}))\n        .map(([key, { correct_count, total_count, seconds_correct, total_seconds }]) => ({\n            word: key,\n            correct_factor: Math.round(100 * correct_count / (total_count * 1.0)) / 100,\n            confidence_factor: Math.round(100 * seconds_correct / (total_seconds * 1.0)) / 100,\n        }))\n        .sort(({ correct_factor: a }, { correct_factor: b }) => a - b)\n        .slice(0, 20);\n\n    const histogramData = Object.entries(stats.reduce((acc, { correct, seconds }) => {\n        const key = Math.floor(seconds);\n        if (!(key in acc)) {\n            acc[key] = { correct_count: 0, wrong_count: 0 };\n        }\n        let entry = acc[key];\n        if (correct) {\n            entry.correct_count += 1;\n        } else {\n            entry.wrong_count += 1;\n        }\n\n        return acc;\n    }, {}))\n        .map(([key, entry]) => ({ seconds: key, ...entry }))\n        .sort(({ seconds: a }, { seconds: b }) => a - b);\n\n    return {\n        worstPerformers,\n        weeklyPerformance: [],\n        histogram: histogramData,\n    };\n};\n","import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Badge, Card, CardBody, CardHeader } from 'reactstrap';\nimport LineChartWeeklyPerformance from '../components/LineChartWeeklyPerformance';\nimport BarChartHistogram from '../components/BarChartHistogram';\nimport Loader from '../components/Loader';\nimport {getLocalReports} from '../components/reporting';\n\nconst bgClasses = {\n  MAS: 'bg-masculine',\n  FEM: 'bg-feminine',\n  NEU: 'bg-neuter',\n};\n\nconst classFromTags = (tags) => {\n  const match = /MAS|FEM|NEU/.exec(tags);\n  if (match) {\n    return bgClasses[match[0]];\n  }\n  return '';\n};\n\nexport default (props) => {\n  const [status, setStatus] = useState({ busy: false, error: null });\n  const [report, setReport] = useState({\n    worstPerformers: [],\n    weeklyPerformance: [],\n    histogram: [],\n  });\n  useEffect(() => {\n    (async () => {\n      setStatus({ busy: true });\n      const {worstPerformers, weeklyPerformance,histogram} = await getLocalReports({});\n\n      setStatus({ busy: false });\n      setReport({\n        worstPerformers,\n        weeklyPerformance,\n        histogram,\n      });\n    })();\n  }, []);\n\n  return (\n    <div className='container report-page'>\n      {!!status.busy && <Loader />}\n      <section className='row'>\n        <div className='col'>\n          <h2>Report</h2>\n\n          <Card>\n            <CardHeader>\n              <h5 className='mb-0'>Needs improvements</h5>\n            </CardHeader>\n            <CardBody>\n              {report.worstPerformers.map((item) => (\n                <Badge\n                  pill\n                  className={`p-2 mr-2 mb-2 ${classFromTags(item.tags)}`}\n                  style={{ opacity: 1.05 - item.confidence_factor }}\n                >\n                  {item.word}\n                  <span className='pl-2'>{item.correct_factor * 100}%</span>\n                </Badge>\n              ))}\n            </CardBody>\n          </Card>\n\n          <Card className='mt-2'>\n            <CardHeader>\n              <h5 className='mb-0'>Performance</h5>\n            </CardHeader>\n            <CardBody>\n              {!!(report && report.histogram && report.histogram.length) && (\n                <BarChartHistogram histogram={report.histogram} />\n              )}\n              {!!(\n                report &&\n                report.weeklyPerformance &&\n                report.weeklyPerformance.length\n              ) && (\n                <LineChartWeeklyPerformance\n                  weeklyPerformance={report.weeklyPerformance}\n                />\n              )}\n            </CardBody>\n          </Card>\n        </div>\n      </section>\n    </div>\n  );\n};\n","import {GoogleLogout} from 'react-google-login';\nimport React, { useCallback, useContext } from 'react';\nimport { Nav, Navbar, NavbarBrand } from 'reactstrap';\nimport { NavLink } from 'react-router-dom';\nimport { DispatchContext, StateContext } from './context';\nimport { ACTION_LOGOUT } from './constants';\n\nexport default () => {\n  const dispatch = useContext(DispatchContext);\n  const state = useContext(StateContext);\n  const onLogout = useCallback(() => {\n    dispatch({ type: ACTION_LOGOUT });\n    window.localStorage.clear();\n  }, []);\n\n  return (\n    <Navbar light className=\"bg-light\">\n      <NavbarBrand className=\"font-weight-lighter\">Hallo Deutsch</NavbarBrand>\n      {!!state.getIn(['profile', 'isLoggedIn']) && ([\n        <Nav className=\"mx-auto\">\n          <NavLink to=\"/collections\" exact className=\"nav-item px-2\">\n            Collections\n          </NavLink>\n          <NavLink to=\"/report\" exact className=\"nav-item px-2\">\n            Report\n          </NavLink>\n        </Nav>,\n        <Nav>\n          <GoogleLogout\n              clientId={\n                \"976856176051-ietkcknpua13udt2tucm8sbecik7h5rt.apps.googleusercontent.com\"\n              }\n              buttonText=\"Logout\"\n              onLogoutSuccess={onLogout}\n          />\n        </Nav>\n      ])}\n    </Navbar>\n  );\n};\n","import React, { useCallback, useContext, useEffect, useState } from 'react';\nimport {\n  Button,\n  Form,\n  FormGroup,\n  Input,\n  Label,\n  ListGroup,\n  ListGroupItem,\n  Modal,\n  ModalBody,\n  ModalFooter,\n  ModalHeader,\n} from 'reactstrap';\nimport AsyncSelect from 'react-select/async';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { default as _debounce } from 'lodash.debounce';\nimport network, { debounce } from './network';\nimport {\n  ACTION_ADD_TO_COLLECTION,\n  STATUS_ERROR,\n  STATUS_PENDING,\n} from './constants';\nimport { DispatchContext } from './context';\n\nconst debouncedNetwork = debounce(1);\n\nconst debouncedSearch = _debounce(\n  (inputValue, callback) => {\n    network.get(`/api/search?q=${inputValue}`).then(({ ok, terms, error }) => {\n      if (!ok) {\n        if (error.status_code === 401) {\n          localStorage.clear();\n          window.history.replaceState({ expired: true }, null, '/login');\n          return;\n        }\n\n        return [];\n      }\n      callback(terms.map(({ id, word }) => ({ value: id, label: word })));\n    });\n  },\n  1000,\n  {\n    leading: false,\n    trailing: true,\n  }\n);\n\nexport default () => {\n  const dispatch = useContext(DispatchContext);\n  const history = useHistory();\n  const { collectionId = null } = useParams();\n  const [status, setStatus] = useState({ busy: false, error: null });\n  const [collection, setCollection] = useState({});\n  const [query, setQuery] = useState('');\n  const [shownCount, setShownCount] = useState(10);\n\n  const onCloseClick = useCallback(() => {\n    history.replace('/collections');\n  }, [history]);\n  const onEditCollectionNameChanged = useCallback(\n    async ({ target: { value } }) => {\n      setCollection({\n        ...collection,\n        name: value,\n      });\n\n      const p = debouncedNetwork.patch(`/api/me/collections/${collectionId}`, {\n        name: value,\n      });\n      if (p) {\n        const { ok, error } = await p;\n        if (!ok) {\n          if (error.status_code === 401) {\n            localStorage.clear();\n            history.replace('/login', { expired: true });\n            return;\n          }\n        }\n      }\n    },\n    [collection]\n  );\n\n  const onNewTermSelected = useCallback(\n    async (choice, { action }) => {\n      if (action !== 'select-option') {\n        return;\n      }\n      const type = ACTION_ADD_TO_COLLECTION;\n      dispatch({ type, status: STATUS_PENDING });\n\n      const { ok, error } = await network.post(\n        `/api/me/collections/${collectionId}/terms`,\n        {\n          term_id: choice.value,\n        }\n      );\n\n      if (!ok) {\n        if (error.status_code === 401) {\n          localStorage.clear();\n          history.replace('/login', { expired: true });\n          return;\n        }\n        return dispatch({ type, status: STATUS_ERROR, error });\n      }\n\n      setCollection({\n        ...collection,\n        terms: [\n          { id: choice.value, word: choice.label },\n          ...(collection.terms || []),\n        ],\n      });\n    },\n    [collection]\n  );\n\n  const onTermRemoved = useCallback(\n    async (termId) => {\n      const { ok, error } = await network.delete(\n        `/api/me/collections/${collectionId}/terms/${termId}`\n      );\n      if (!ok) {\n        if (error.status_code === 401) {\n          localStorage.clear();\n          history.replace('/login', { expired: true });\n          return;\n        }\n\n        return;\n      }\n\n      setCollection(\n        {\n          ...collection,\n          terms: collection.terms.filter(({ id: key }) => key !== termId),\n        },\n        [collection]\n      );\n    },\n    [collection]\n  );\n\n  useEffect(() => {\n    setStatus({ busy: true });\n    (async () => {\n      const { ok, error, collection: _c } = await network.get(\n        `/api/me/collections/${collectionId}`\n      );\n      if (!ok) {\n        if (error.status_code === 401) {\n          localStorage.clear();\n          history.replace('/login', { expired: true });\n          return;\n        }\n\n        return;\n      }\n\n      setStatus({ busy: false });\n      setCollection(_c);\n    })();\n  }, [collectionId]);\n\n  return (\n    <Modal isOpen={true}>\n      <ModalHeader toggle={onCloseClick}>Edit Collection</ModalHeader>\n      <ModalBody>\n        {status.busy && <div className=\"loader loader-dark\">Loading...</div>}\n        {!status.busy && (\n          <Form>\n            <FormGroup>\n              <Label>Name</Label>\n              <Input\n                value={collection.name}\n                onChange={onEditCollectionNameChanged}\n              />\n            </FormGroup>\n            <FormGroup>\n              <AsyncSelect\n                placeholder=\"Enter your new word...\"\n                value={query}\n                onInputChange={(value) => setQuery(value)}\n                onChange={onNewTermSelected}\n                loadOptions={debouncedSearch}\n              />\n              <ListGroup flush>\n                {(collection.terms || []).slice(0, shownCount).map((item) => (\n                  <ListGroupItem key={item.id}>\n                    {item.word}\n                    <Button\n                      size=\"sm\"\n                      color=\"link\"\n                      className=\"float-right\"\n                      onClick={() => onTermRemoved(item.id)}\n                    >\n                      &times;\n                    </Button>\n                  </ListGroupItem>\n                ))}\n                {collection.terms && shownCount < collection.terms.length && (\n                  <ListGroupItem>\n                    <Button\n                      color=\"link\"\n                      block\n                      onClick={() => setShownCount(shownCount * 2)}\n                    >\n                      Show more >>\n                    </Button>\n                  </ListGroupItem>\n                )}\n              </ListGroup>\n            </FormGroup>\n          </Form>\n        )}\n      </ModalBody>\n      <ModalFooter>\n        <Button onClick={onCloseClick} color=\"light\">\n          Close\n        </Button>\n      </ModalFooter>\n    </Modal>\n  );\n};\n","import React, { useContext } from \"react\";\nimport {\n  HashRouter as Router,\n  Redirect,\n  Route,\n  Switch,\n} from \"react-router-dom\";\nimport \"./App.scss\";\n\nimport PlayPage from \"./pages/PlayPage\";\nimport LoginPage from \"./pages/LoginPage\";\nimport CollectionListPage from \"./pages/CollectionListPage\";\nimport ReportPage from \"./pages/ReportPage\";\nimport AppNav from \"./components/AppNav\";\nimport { DispatchContext, StateContext } from \"./components/context\";\nimport EditCollectionModal from \"./components/EditCollectionModal\";\n\nfunction App() {\n  const dispatch = useContext(DispatchContext);\n  const state = useContext(StateContext);\n\n  return (\n    <div className=\"App\">\n      <Router>\n        <Switch>\n          <Route exact path=\"/login\">\n            <LoginPage />\n          </Route>\n          <Route exact path=\"/play/:sessionId\">\n            <AppNav />\n            <PlayPage />\n          </Route>\n          <Route exact path=\"/play\">\n            <AppNav />\n            <PlayPage />\n          </Route>\n          <Route exact path=\"/report\">\n            <AppNav />\n            <ReportPage />\n          </Route>\n          <Route\n            path=\"/collections\"\n            render={() => {\n              if (!state.getIn([\"profile\", \"isLoggedIn\"])) {\n                return <Redirect to=\"/login\" />;\n              }\n\n              return (\n                <>\n                  <AppNav />\n                  <CollectionListPage />\n                  <Route path=\"/collections/:collectionId\">\n                    <EditCollectionModal />\n                  </Route>\n                </>\n              );\n            }}\n          />\n          <Route>\n            <Redirect to=\"/login\" />\n          </Route>\n        </Switch>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { fromJS } from 'immutable';\nimport {\n  ACTION_CREATE_COLLECTION,\n  ACTION_LIST_COLLECTIONS,\n  ACTION_LOGIN,\n  ACTION_LOGOUT,\n  ACTION_NEXT_WORD,\n  ACTION_SHOW_REPORT,\n  ACTION_START_SESSION,\n  SESSION_STATUS_DONE,\n  SESSION_STATUS_PENDING,\n  SESSION_STATUS_PLAYING,\n  STATUS_ERROR,\n  STATUS_PENDING,\n} from './constants';\n\nexport const initialState = fromJS({\n  profile: {\n    isLoggedIn: false,\n  },\n  gameSession: {\n    id: null,\n    status: SESSION_STATUS_PENDING,\n  },\n  collections: [],\n  report: {},\n});\n\nexport default (state, { type, status, ...action }) => {\n  if (status === STATUS_ERROR) {\n    if (action.error && action.error === 'Invalid token') {\n      return state.set(\n        'profile',\n        fromJS({\n          isLoggedIn: false,\n        })\n      );\n    }\n    return state;\n  }\n  if (status === STATUS_PENDING) {\n    return state;\n  }\n\n  console.log({ type, action, state: state.toJS() });\n  switch (type) {\n    case ACTION_LOGIN: {\n      return state.set(\n        'profile',\n        fromJS({\n          isLoggedIn: true,\n          defaultCollection: action.defaultCollection,\n          ...action.profile,\n        })\n      );\n    }\n    case ACTION_LOGOUT: {\n      return state.set(\n        'profile',\n        fromJS({\n          isLoggedIn: false,\n        })\n      );\n    }\n    case ACTION_LIST_COLLECTIONS: {\n      return state\n        .set('collections', fromJS(action.collections))\n        .set('myCollections', fromJS(action.myCollections));\n    }\n    case ACTION_CREATE_COLLECTION: {\n      return state.updateIn(['myCollections'], (collections) =>\n        collections.unshift(fromJS(action.collection))\n      );\n    }\n    case ACTION_START_SESSION: {\n      return state.setIn(\n        ['gameSession'],\n        fromJS({\n          ...action.session,\n          hasNext: true,\n          status: SESSION_STATUS_PLAYING,\n        })\n      );\n    }\n    case ACTION_NEXT_WORD: {\n      return state\n        .setIn(['gameSession', 'term'], fromJS(action.term))\n        .setIn(['gameSession', 'cursor'], action.cursor)\n        .setIn(['gameSession', 'hasNext'], action.hasNext);\n    }\n    case ACTION_SHOW_REPORT: {\n      return state\n        .setIn(['gameSession', 'status'], SESSION_STATUS_DONE)\n        .set('report', fromJS(action.report));\n    }\n    default:\n      return state;\n  }\n};\n","import React, { useReducer } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport { DispatchContext, StateContext } from \"./components/context\";\nimport reducer, { initialState } from \"./components/reducer\";\nimport { init as initDb } from \"./components/indexeddb\";\n\nconst Index = (props) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  return (\n    <DispatchContext.Provider value={dispatch}>\n      <StateContext.Provider value={state}>\n        <App />\n      </StateContext.Provider>\n    </DispatchContext.Provider>\n  );\n};\n\ninitDb().then(() => {\n  ReactDOM.render(<Index />, document.getElementById(\"root\"));\n});\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}